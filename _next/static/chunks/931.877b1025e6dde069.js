!function(){var e={931:function(e,t,r){"use strict";var n=r(7383),o=r.n(n),a=(r(6955),[{key:"letsy",name:"Letsy",resource:"money"},{key:"crafts",name:"Crafts",resource:"money"},{key:"well",name:"Well Water",resource:"water"},{key:"stream",name:"Filtered Water",resource:"water"},{key:"rainfall",name:"Rainfall",resource:"water"},{key:"preserves",name:"Preserves",resource:"food"},{key:"plants",name:"Plants",resource:"food"},{key:"scrap",name:"Scrap",resource:"junk"}]),i=r(1882),s={phase:"preEvent",exploration:void 0,time:0,messages:[{priority:"info",text:"The news has been weird lately. I feel like I should prepare."},{priority:"info",text:"My fridge has nothing but condiments."}],upgrades:{},timedUpgrades:{EW1:{time:(0,i.Z)(360),level:1},EW2:{time:(0,i.Z)(504),level:1},EM1:{time:(0,i.Z)(264),level:1}},timeline:[],resources:{money:0,water:0,food:0,junk:100,power:0},maxResources:{money:0,water:0,food:0,junk:100,power:0},skills:{perception:{current:1,permanent:0},endurance:{current:1,permanent:0},patience:{current:1,permanent:0},strength:{current:1,permanent:0},tech:{current:1,permanent:0}},explorations:{},multiplier:2,timers:{scrap:0,action:0,event:0,letsy:0,crafts:0,shopping:0,plants:0,preserves:0,rainfall:0,stream:0,well:0,food:0,junk:0,money:0,power:0,water:0},loops:0,unlocks:{}},u=[{key:"E1",name:"Explore the area",description:"My home hasn't changed, but everything past 500 feet is shrouded in dust.",message:"Something is really messed up with the area around here. Space is warped.",drain:{food:1,water:2},train:{perception:1,endurance:2},time:8e5,requirements:{}},{key:"T1",name:"Watch warped spaces",description:"These warped spaces seem random, but maybe if I watch them for long enough, they'll start to make sense.",message:'I\'m calling these "time holes" until I think of a better name.',drain:{food:1,water:1},train:{perception:2,patience:2},time:16e5,requirements:{action:"E1"}},{key:"T2",name:"Watch smaller time holes",description:"I'm not ready to jump into a time hole, but watching from a distance couldn't hurt, right?",message:'Hey! I saw another Barry in one of the holes and called out, and he seemed to notice. It looks like I could influence the past, at least with very short messages. Maybe I\'ll start with "more water."',drain:{food:1,water:1},train:{patience:2},time:16e5,requirements:{action:"T1"}},{key:"E2",name:"Explore something",description:"[something something go out further?]",message:"",drain:{food:2,water:2},train:{endurance:2},time:1e6,requirements:{action:"T2"}},{key:"T3",name:"Figure out lost time",description:"Time passes more slowly when I'm closer to a time hole, which makes the rest of the world move faster. I could find out how close I can get, and tell Past Barry about this.",message:"For now, I could safely get time to pass about twice as fast. That'll be better than watching radishes grow.",drain:{food:2,water:2},train:{perception:2},time:1e6,requirements:{action:"E2"}},{key:"E3",name:"Explore outside home",description:"Guess it's time to head into what's left of town.",message:"",drain:{food:2,water:2},train:{endurance:2},time:1e6,requirements:{action:"T3"}},{key:"E4",name:"Explore school ruins",description:"There's a school nearby, though there isn't much left of it. This might get me some good info for Past Barry.",message:"Hey, there's an old #7291 generator here! I can't believe they still use these. It's not working, but I could fix it if I had the parts.",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"E3"}},{key:"F1",name:"Look for parts",description:"Someone took this thing apart. I'm going to need some M8 bolts and a socket to match.",message:"",drain:{food:2,water:2},train:{perception:2,tech:2},time:1e6,requirements:{action:"E4"}},{key:"F2",name:"Look for instructions",description:"",message:"",drain:{food:2,water:2},train:{strength:2,tech:2},time:1e6,requirements:{action:"F1"}},{key:"F3",name:"Fix the generator",description:"",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"F2"}},{key:"E5",name:"Explore machine shop",description:"I found the ruins of what looks like an old machine shop. Maybe I can find something to help out Past Barry.",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"E3"}},{key:"E6",name:"Explore big time holes",description:"There are a bunch of bigger time holes near a fasion district. I might be able to send larger items through these - maybe even travel?",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"E3"}},{key:"S1",name:"Move wreckage",description:"There's a really interesting time hole up the stairs, but I'll have to move some wreckage out of the way to get to it.",message:"",drain:{food:2,water:2},train:{strength:2},time:1e6,requirements:{action:"E6"}},{key:"T4",name:"Convince yourself",description:"Hey! I saw myself from just a day a ago! This time hole seems to fight me a lot less. Maybe I could just jump through?",message:"After a lot of arguing with Past Barry, we agreed to swap places when the time comes. I have no idea what'll happen to him, but that sounds like Future Barry problems, not mine.",drain:{food:2,water:2},train:{patience:2},time:1e6,requirements:{action:"S1"}}],l=function(e){var t=u.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find an action with key: ".concat(e));return t};var c=[{phase:"preEvent",key:"PF1",type:"purchased",name:"Canning supplies",description:"I could preserve food if I got some basic canning supplies.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",food:function(e){return e}},effectDescription:"+1 preserved food per level",flavorTexts:{},requirements:{money:100},source:"preserves"},{phase:"preEvent",key:"PF2",type:"purchased",name:"Gas burner",description:"Buy a big old propane gas burner to boil water much faster.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"multiply",food:function(e){return 2*e}},effectDescription:"x2 preserved food per level",flavorTexts:{},requirements:{upgrade:{key:"PF1",level:3}},source:"preserves"},{phase:"preEvent",key:"PF6",type:"purchased",name:"Pressure canner",description:"A pressure canner would let me preserve more stuff without getting botulism.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",food:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 time required for preserved food per level",flavorTexts:{},requirements:{upgrade:{key:"PF1",level:5}},source:"preserves"},{phase:"preEvent",key:"PF3",type:"purchased",name:"Plant some fast-growing crops",description:"Looks like I'll be eating a lot of radishes and green onions.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",food:function(e){return e}},effectDescription:"+1 plant food per level",flavorTexts:{},requirements:{food:100},source:"plants"},{phase:"preEvent",key:"PF4",type:"purchased",name:"Set up hydroponics",description:"I can get some plants to grow faster, and more variety would be nice.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",food:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 plant growing time per level",flavorTexts:{},requirements:{upgrade:{key:"PF3",level:3}},source:"plants"},{phase:"preEvent",key:"PW1",type:"purchased",name:"Set up rainwater collection",description:"Buy and set up barrels and tarps for rainwater collection.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e}},effectDescription:"+1 rainwater per level",flavorTexts:{},requirements:{money:300},source:"rainfall"},{phase:"preEvent",key:"PW2",type:"purchased",name:"Buy a cistern",description:"Getting a big water container should make collection easier.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",water:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 rainwater time per level",flavorTexts:{},requirements:{upgrade:{key:"PW1",level:3}},source:"rainfall"},{phase:"preEvent",key:"PW3",type:"purchased",name:"Buy a water filter",description:"I can filter some water from the stream nearby.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e}},effectDescription:"+1 filtered water per level",flavorTexts:{},requirements:{water:100},source:"stream"},{phase:"preEvent",key:"PW4",type:"purchased",name:"Switch to an electric filter",description:"Manually cranking this filter is way too much work when I have electricity.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",water:function(e){return Math.pow(.8,e)}},effectDescription:"*0.8 filtered water time per level",flavorTexts:{},requirements:{upgrade:{key:"PW3",level:3}},source:"stream"},{phase:"preEvent",key:"PW5",type:"purchased",name:"Drill a deeper well",description:"My well's not going to collect enough water right now. I should get someone to drill deeper.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e+1}},effectDescription:"+1 well water per level",flavorTexts:{},requirements:{water:300},source:"well"},{phase:"preEvent",key:"PW6",type:"purchased",name:"Overcharge well",description:"",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e+2}},effectDescription:"x2 well water per level",flavorTexts:{},requirements:{upgrade:{key:"PW5",level:3}},source:"well"},{phase:"preEvent",key:"PM1",type:"purchased",name:"Sell your stuff",description:"I should set up a Letsy account and pawn off some of my junk for steady income.",max:5,costs:{junk:function(e){return 10*e}},effect:{type:"add",money:function(e){return e+1}},effectDescription:"+$1 sales per level",flavorTexts:{},requirements:{},source:"letsy"},{phase:"preEvent",key:"PM2",type:"purchased",name:"Advertise your Letsy store",description:"Maybe I can get rid of these vintage Neil Breen DVDs.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",money:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 sale time per level",flavorTexts:{},requirements:{upgrade:{key:"PM1",level:3}},source:"letsy"},{phase:"preEvent",key:"PM5",type:"purchased",name:"Set up multiple accounts",description:"It's against their Terms of Service, but they probably won't notice.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"multiply",money:function(e){return e+1}},effectDescription:"x2 sales per level",flavorTexts:{},requirements:{upgrade:{key:"PM1",level:5}},source:"letsy"},{phase:"preEvent",key:"PM3",type:"purchased",name:"Sell some scrap art",description:"I've got a shed full of scrap metal I could weld together into art.",max:5,costs:{junk:function(e){return 10*e}},effect:{type:"add",money:function(e){return e+1}},effectDescription:"+1 crafts sale per level",flavorTexts:{},requirements:{money:200},source:"crafts"},{phase:"preEvent",key:"PM4",type:"purchased",name:"Sell some scrap art",description:"There's a market for industrial furniture. Might as well make some, for people who believe the world's just fine.",max:5,costs:{junk:function(e){return 10*e}},effect:{type:"multiply",money:function(e){return e+2}},effectDescription:"x2 sale value per level",flavorTexts:{},requirements:{upgrade:{key:"PM3",level:3}},source:"crafts"},{phase:"postEvent",key:"TW1",type:"purchased",name:"Condensate Capture",description:"Pluck water out of the air instead of relying on rainfall.",max:5,costs:{food:function(e,t){return 100*e+10*t}},effect:{type:"multiply",water:function(e){return e+1}},effectDescription:"x2 rainwater, can collect without rainfall",flavorTexts:{},requirements:{exploration:"E3"},source:"rainfall"},{phase:"preEvent",key:"EW1",type:"event",name:"Rainfall stops",description:"The rain has stopped, so I'm not getting any water that way. I hope it starts up again soon.",max:2,costs:{},effect:{type:"multiply",water:function(e){return e-1}},effectDescription:"",flavorTexts:{1:"The rain has stopped, so I'm not getting any water that way. I hope it starts up again soon.",2:"The rain has stopped. Luckily, not a problem for the condensate collector. Thanks, Future Barry!"},requirements:{},source:"rainfall"},{phase:"preEvent",key:"EW2",type:"event",name:"Stream contaminated",description:"The stream's started to smell like paint. I'm not sure what happened, but I'm not going to trust it now.",max:2,costs:{},effect:{type:"multiply",water:function(e){return e-1}},effectDescription:"",flavorTexts:{1:"The stream's started to smell like paint. I'm not sure what happened, but I'm not going to trust it now.",2:"The stream's started to smell like paint, but that's not a problem for this filter. Nice thinking, Future Barry!"},requirements:{},source:"stream"},{phase:"preEvent",key:"EM1",type:"event",name:"Letsy downtime",description:"Letsy just had an outage, and it's been flaky ever since. My income there has dropped in half.",max:2,costs:{},effect:{type:"multiply",money:function(e){return 1===e?.5:1}},effectDescription:"",flavorTexts:{1:"Letsy just had an outage, and it's been flaky ever since. My income there has dropped in half.",2:""},requirements:{},source:"letsy"},{phase:"preEvent",key:"PJ1",type:"purchased",name:"Set up scrap delivery",description:"There's a local scrapyard I could pay for regular deliveries.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",junk:function(e){return e}},effectDescription:"+1 scrap metal per level",flavorTexts:{},requirements:{money:50},source:"scrap"},{phase:"preEvent",key:"PJ2",type:"purchased",name:"Improve scrap quality",description:"Pay the scrapyard a bit more for less rust and more usable pieces.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",junk:function(e){return e}},effectDescription:"+1 scrap metal per level",flavorTexts:{},requirements:{money:100},source:"scrap"}],p=function(e){var t=c.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find an upgrade with key: ".concat(e));return t},f=[{key:"pastRestart",requirements:{exploration:"T2"},message:{priority:"alert",text:'Unlock: You can change decisions you made in the past. Click a day on the timeline, then "Restart Here."'}},{key:"pastSpeed2x",requirements:{exploration:"T3"},message:{priority:"alert",text:"Speed up time for Past Barry up to 2X."}},{key:"loop",requirements:{exploration:"S1"},message:{priority:"alert",text:"Unlock: Restart after the timeskip, but keep some of your stats and knowledge. This may have consequences."}}],m=function(e){return null!==e&&void 0!==e};function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var y,h=function(e,t){return e.reduce((function(e,r){var n=r.upgrade.effect[t.resource];return n&&"time"===r.upgrade.effect.type?Math.floor(e*n(r.level)):e}),5e3)},v=function(e,t){return e.reduce((function(e,r){var n=r.upgrade,o=n.effect[t.resource];return o&&"add"===n.effect.type?e+o(r.level):o&&"multiply"===n.effect.type?e*o(r.level):e}),0)},g=r(8253),w=r(5170),k=r.n(w),x=r(567),b=r(2699);function E(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function T(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){E(e,t,r[t])}))}return e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var P=new Date(1997,7,29,2,14,0),j=(0,x.Z)(P,{days:30}),q=(P.valueOf()-j.valueOf())/1e3,M=function(e,t){var r;r="preEvent"===e.phase?Math.min(t*e.multiplier,q-e.time):t*e.multiplier*25,D(e,r),F(e,t),A(e,r),W(e,r),B(e,r),L(e,r),S(e,r),O(e,r)},O=function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=Object.keys(e.resources)[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;e.maxResources[i]=Math.max(e.maxResources[i],e.resources[i])}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}},S=function(e,t){var r=!0,n=!1,o=void 0;try{for(var a,i=Object.entries(e.timedUpgrades)[Symbol.iterator]();!(r=(a=i.next()).done);r=!0){var s=I(a.value,2),u=s[0],l=s[1],c=p(u);if(l&&"event"===c.type&&(l.time<e.time&&l.time>e.time-t)){var f=c.flavorTexts[l.level];f&&e.messages.push({priority:"alert",text:f})}}}catch(m){n=!0,o=m}finally{try{r||null==i.return||i.return()}finally{if(n)throw o}}},D=function(e,t){if(e.time===q&&"preEvent"===e.phase)return e.phase="event",e.timers=T({},s.timers),e.multiplier=1,void(e.messages=[{priority:"info",text:"That was strange. Where am I?"}]);"event"!==e.phase&&"traveling"!==e.phase&&("preEvent"===e.phase||"postEvent"===e.phase&&e.exploration)&&(e.time=e.time+t)},F=function(e,t){"event"===e.phase&&(e.timers.event+=t,e.timers.event>1e3&&(e.timers.event=0,e.phase="postEvent"))},A=function(e,t){var r=e.timers;if("preEvent"===e.phase){var n=function(e){var t=e.upgrades,r=e.time,n=e.timedUpgrades;return Object.entries(t).map((function(e){var t=d(e,2),r=t[0],n=t[1];return n?{key:r,level:n.level,upgrade:p(r)}:null})).concat(Object.entries(n).map((function(e){var t=d(e,2),n=t[0],o=t[1];return!o||o.time>r?null:{key:n,level:o.level,upgrade:p(n)}}))).filter(m).sort((function(e,t){var r=e.upgrade.effect.type,n=t.upgrade.effect.type;return r===n?0:"add"===r&&"multiply"===n?-1:1}))}(e),o=(0,b.groupBy)(n,(function(e){return e.upgrade.source})),i=!0,s=!1,u=void 0;try{for(var l,c=a[Symbol.iterator]();!(i=(l=c.next()).done);i=!0){var f=l.value,y=o[f.key];if(y){r[f.key]+=t;var g=h(y,f),w=Math.floor(r[f.key]/g);if(w){var k=v(y,f);r[f.key]=r[f.key]%g,e.resources[f.resource]+=w*k}}}}catch(x){s=!0,u=x}finally{try{i||null==c.return||c.return()}finally{if(s)throw u}}}},W=function(e,t){var r=e.timers,n=e.phase;if("postEvent"===n&&e.exploration){r.food+=t;var o=Math.floor(r.food/5e3);if(o){var a=!0,i=!1,s=void 0;try{for(var u,l=function(t,a){var i=a.value,s=Object.entries(e.upgrades).reduce((function(e,t){var r,a=I(t,2),s=a[0],u=a[1],l=p(s);return l.phase!==n?e:l.effect[i]?l.effect[i](null!==(r=null===u||void 0===u?void 0:u.level)&&void 0!==r?r:0):o}),o);r[i]=r[i]%5e3,e.resources[i]=Math.max(e.resources[i]-s,0)},c=["food","water"][Symbol.iterator]();!(a=(u=c.next()).done);a=!0)l(0,u)}catch(f){i=!0,s=f}finally{try{a||null==c.return||c.return()}finally{if(i)throw s}}}}},B=function(e,t){if("postEvent"===e.phase&&e.exploration){var r=l(e.exploration),n=!0,o=!1,a=void 0;try{for(var i,s=Object.entries(r.train)[Symbol.iterator]();!(n=(i=s.next()).done);n=!0){var u=I(i.value,2),c=u[0],p=u[1];p&&(e.skills[c].current+=t*p/4e5)}}catch(f){o=!0,a=f}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}}},L=function(e,t){var r=t;if("postEvent"===e.phase&&e.resources.food<=0&&(e.phase="traveling",e.exploration=void 0,e.multiplier=1,e.timers=T({},s.timers),e.messages.push({priority:"alert",text:"My supplies are gone. I should go help out Past Barry so I can be better prepared."})),e.exploration){var n,o,a=l(e.exploration),i=Object.entries(a.train).reduce((function(t,r){var n=I(r,2),o=n[0],a=n[1];return a?e.skills[o].current*a:t}),0),u=100/a.time*(r*Math.log(i));if(null!==(n=(y=e.explorations)[e.exploration])&&void 0!==n||(y[e.exploration]={progress:0}),e.explorations[e.exploration].progress=Math.min((null!==(o=e.explorations[e.exploration].progress)&&void 0!==o?o:0)+u,100),100===e.explorations[e.exploration].progress){var c=function(e){var t=!0,r=!1,n=void 0;try{for(var o,a=f[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;if(e.exploration&&i.requirements.exploration===e.exploration)return i;if(e.upgrade&&i.requirements.upgrade===e.upgrade)return i}}catch(s){r=!0,n=s}finally{try{t||null==a.return||a.return()}finally{if(r)throw n}}}({exploration:a.key});e.exploration=void 0,c&&(e.unlocks[c.key]=!0,e.messages.push(c.message)),a.message&&e.messages.push({priority:"info",text:a.message})}}};function R(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){R(e,t,r[t])}))}return e}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C=function(e,t){switch(t.type){case"BUY_UPGRADE":var r,n,o=t.payload.key,a=e.resources,u=e.upgrades,l=null!==(n=null===(r=u[o])||void 0===r?void 0:r.level)&&void 0!==n?n:0,c=l+1,f=p(o),m=!0,d=!1,y=void 0;try{for(var h,v=Object.keys(f.costs)[Symbol.iterator]();!(m=(h=v.next()).done);m=!0){var g=h.value,w=f.costs[g];if(w&&w(c,0)>a[g])return}}catch(de){d=!0,y=de}finally{try{m||null==v.return||v.return()}finally{if(d)throw y}}if(l<f.max){var k=!0,x=!1,b=void 0;try{for(var E,T=Object.keys(f.costs)[Symbol.iterator]();!(k=(E=T.next()).done);k=!0){var I,P,j,q=E.value;e.resources[q]-=null!==(j=null===(P=(I=f.costs)[q])||void 0===P?void 0:P.call(I,c,0))&&void 0!==j?j:0}}catch(de){x=!0,b=de}finally{try{k||null==T.return||T.return()}finally{if(x)throw b}}u[o]={level:c},e.timeline.push({time:e.time,action:t})}break;case"BUY_TIMED_UPGRADE":var O,S,D=t.payload,F=D.key,A=D.day,W=29-A,B=e.resources,L=e.timedUpgrades,R=null!==(S=null===(O=L[F])||void 0===O?void 0:O.level)&&void 0!==S?S:0,N=R+1,Z=p(F),G=!0,H=!1,V=void 0;try{for(var Y,J=Object.keys(Z.costs)[Symbol.iterator]();!(G=(Y=J.next()).done);G=!0){var X=Y.value,$=Z.costs[X];if($&&$(N,W)>B[X])return}}catch(de){H=!0,V=de}finally{try{G||null==J.return||J.return()}finally{if(H)throw V}}if(R<Z.max){var z=!0,K=!1,Q=void 0;try{for(var ee,te=Object.keys(Z.costs)[Symbol.iterator]();!(z=(ee=te.next()).done);z=!0){var re,ne,oe,ae=ee.value;e.resources[ae]-=null!==(oe=null===(ne=(re=Z.costs)[ae])||void 0===ne?void 0:ne.call(re,N,W))&&void 0!==oe?oe:0}}catch(de){K=!0,Q=de}finally{try{z||null==te.return||te.return()}finally{if(K)throw Q}}L[F]={level:N,time:(0,i.Z)(24*A)}}break;case"SET_MULTIPLIER":e.multiplier=t.payload.multiplier;break;case"EXPLORE":if("postEvent"!==e.phase)return;if(e.exploration===t.payload.location)return void(e.exploration=void 0);e.exploration=t.payload.location;break;case"TRAVEL":if("TRAVEL"===t.type){e.explorations={},e.resources=_({},s.resources),e.maxResources=_({},s.maxResources);var ie=e.timeline;e.timeline=[],e.time=0,e.phase="preEvent",e.upgrades=_({},s.upgrades,Object.fromEntries(Object.entries(e.upgrades).filter((function(e){var t=U(e,1)[0];return"preEvent"!==p(t).phase})).map((function(e){var t=U(e,2);return[t[0],t[1]]}))));var se=0,ue=!0,le=!1,ce=void 0;try{for(var pe,fe=ie[Symbol.iterator]();!(ue=(pe=fe.next()).done);ue=!0){var me=pe.value;if(Math.floor(me.time/(0,i.Z)(24))>=t.payload.day)break;M(e,me.time-se),C(e,me.action),se=me.time}}catch(de){le=!0,ce=de}finally{try{ue||null==fe.return||fe.return()}finally{if(le)throw ce}}return void M(e,(0,i.Z)(24)*t.payload.day-se)}}};function N(e,t,r,n,o,a,i){try{var s=e[a](i),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,o)}function Z(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function i(e){N(a,n,o,i,s,"next",e)}function s(e){N(a,n,o,i,s,"throw",e)}i(void 0)}))}}function G(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(u){o=!0,a=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var H="reconciliation_game",V="saved_game";k().config({version:2,name:H,storeName:H}),(0,g.vI)();var Y=self;Z(o().mark((function e(){var t,r,n,a;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Z(o().mark((function e(){var t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,k().getItem(V);case 2:return t=e.sent,e.abrupt("return",null!==t&&void 0!==t?t:s);case 4:case"end":return e.stop()}}),e)}))),e.next=3,t();case 3:r=e.sent,Y.postMessage({type:"INITIAL",payload:r}),setInterval((function(){k().setItem(V,r)}),5e3),Y.addEventListener("message",(function(e){var t=e.data,n=G((0,g.aS)(r,(function(e){return"RESET_GAME"===t.type?(k().removeItem(V),s):C(e,t)})),2),o=n[0],a=n[1];r=o,a.length&&Y.postMessage({type:"UPDATE",payload:a})})),n=void 0,(a=function(){var e=(new Date).valueOf();void 0===n&&(n=e);var t=e-n,o=G((0,g.aS)(r,(function(e){M(e,t)})),2),i=o[0],s=o[1];r=i,s.length&&Y.postMessage({type:"UPDATE",payload:s}),n=e,requestAnimationFrame(a)})();case 10:case"end":return e.stop()}}),e)})))()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={id:n,loaded:!1,exports:{}},i=!0;try{e[n].call(a.exports,a,a.exports,r),i=!1}finally{i&&delete t[n]}return a.loaded=!0,a.exports}r.m=e,r.x=function(){var e=r.O(void 0,[201,457,675],(function(){return r(931)}));return e=r.O(e)},function(){var e=[];r.O=function(t,n,o,a){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],o=e[c][1],a=e[c][2];for(var s=!0,u=0;u<n.length;u++)(!1&a||i>=a)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(s=!1,a<i&&(i=a));if(s){e.splice(c--,1);var l=o();void 0!==l&&(t=l)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,o,a]}}(),r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return 675===e?"static/chunks/675.83dd0a1b96aba1cb.js":"static/chunks/"+(201===e?"7a7c95a0":e)+"-"+{201:"20feb1995b92e319",457:"682a9b77a89f3240"}[e]+".js"},r.miniCssF=function(e){},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},r.p="/incremental-game-jam-2022/_next/",function(){var e={931:1};r.f.i=function(t,n){e[t]||importScripts(r.p+r.u(t))};var t=self.webpackChunk_N_E=self.webpackChunk_N_E||[],n=t.push.bind(t);t.push=function(t){var o=t[0],a=t[1],i=t[2];for(var s in a)r.o(a,s)&&(r.m[s]=a[s]);for(i&&i(r);o.length;)e[o.pop()]=1;n(t)}}(),function(){var e=r.x;r.x=function(){return Promise.all([201,457,675].map(r.e,r)).then(e)}}();var n=r.x();_N_E=n}();
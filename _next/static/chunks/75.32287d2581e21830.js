!function(){var e={1075:function(e,t,r){"use strict";var n,o=r(7383),i=r.n(o),a={phase:"preEvent",exploration:void 0,time:0,messages:["The news has been weird lately. I feel like I should prepare.","My fridge has nothing but condiments."],upgrades:{},timedUpgrades:{},timeline:[],resources:{money:1e3,water:0,food:0,savedTime:1},stats:{perception:{current:1,permanent:0}},explorations:{},multiplier:1,timers:{action:0,event:0,food:0,water:0,money:0},loops:0},s=[{key:"startExplore",name:"Explore the area",description:"Your home hasn't changed, but everything past 500 feet is a desert. Find your bearings.",message:"You find some stuff.",drain:{food:1.5},train:{perception:1.5},time:1e4,requirements:{}},{key:"researchThings",name:"Research time travel",description:"",message:"",drain:{food:1.5},train:{perception:1.5},time:1e4,requirements:{action:"startExplore"}}],u=function(e){var t=s.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find an action with key: ".concat(e));return t},l=[{phase:"preEvent",key:"upgradeFood",name:"Make food faster",description:"",max:100,costs:{money:function(e){return 10*e}},effect:{type:"add",food:function(e,t){return e*(t+1)}},flavorTexts:{1:"Set up something to make food faster."},requirements:{}},{phase:"postEvent",key:"postUpgradeFood",name:"Improve thing construction",description:"Use future tech to make food faster than ever before",max:10,costs:{savedTime:function(e,t){return 100*e+10*t}},effect:{type:"add",food:function(e,t){return e*(t+1)}},flavorTexts:{1:"Upgrade from the future!"},requirements:{}}],f=function(e){var t=l.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find an upgrade with key: ".concat(e));return t},c=r(1882),v=r(8253),p=r(5170),d=r.n(p),m=function(e,t){switch(t.type){case"BUY_UPGRADE":var r,n,o=t.payload.key,i=e.resources,a=e.upgrades,s=null!==(n=null===(r=a[o])||void 0===r?void 0:r.level)&&void 0!==n?n:0,u=s+1,l=f(o),v=!0,p=!1,d=void 0;try{for(var m,y=Object.keys(l.costs)[Symbol.iterator]();!(v=(m=y.next()).done);v=!0){var h=m.value,g=l.costs[h];if(g&&g(u,0)>i[h])return}}catch(te){p=!0,d=te}finally{try{v||null==y.return||y.return()}finally{if(p)throw d}}if(s<l.max){var x=!0,w=!1,b=void 0;try{for(var E,k=Object.keys(l.costs)[Symbol.iterator]();!(x=(E=k.next()).done);x=!0){var O,T,j,I=E.value;e.resources[I]-=null!==(j=null===(T=(O=l.costs)[I])||void 0===T?void 0:T.call(O,u,0))&&void 0!==j?j:0}}catch(te){w=!0,b=te}finally{try{x||null==k.return||k.return()}finally{if(w)throw b}}a[o]={level:u},e.timeline.push({time:e.time,action:t})}break;case"BUY_TIMED_UPGRADE":var _,M,S=t.payload,U=S.key,A=S.day,P=29-A,D=e.resources,R=e.timedUpgrades,F=null!==(M=null===(_=R[U])||void 0===_?void 0:_.level)&&void 0!==M?M:0,L=F+1,q=f(U),C=!0,N=!1,Y=void 0;try{for(var Z,G=Object.keys(q.costs)[Symbol.iterator]();!(C=(Z=G.next()).done);C=!0){var W=Z.value,B=q.costs[W];if(B&&B(L,P)>D[W])return}}catch(te){N=!0,Y=te}finally{try{C||null==G.return||G.return()}finally{if(N)throw Y}}if(F<q.max){var V=!0,X=!1,z=void 0;try{for(var H,J=Object.keys(q.costs)[Symbol.iterator]();!(V=(H=J.next()).done);V=!0){var K,Q,$,ee=H.value;e.resources[ee]-=null!==($=null===(Q=(K=q.costs)[ee])||void 0===Q?void 0:Q.call(K,L,P))&&void 0!==$?$:0}}catch(te){X=!0,z=te}finally{try{V||null==J.return||J.return()}finally{if(X)throw z}}R[U]={level:L,time:(0,c.Z)(24*A)}}break;case"SET_MULTIPLIER":e.multiplier=t.payload.multiplier;break;case"EXPLORE":if("postEvent"!==e.phase)return;if(e.exploration===t.payload.location)return void(e.exploration=void 0);e.exploration=t.payload.location}},y=r(567);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var g=new Date(1997,7,29,2,14,0),x=(0,y.Z)(g,{days:30}),w=(g.valueOf()-x.valueOf())/1e3,b=function(e,t){var r;r="preEvent"===e.phase?Math.min(t*e.multiplier,w-e.time):t*e.multiplier,E(e,r),k(e,t),O(e,r),T(e,r),j(e,r),I(e,r)},E=function(e,t){if(e.time===w&&"preEvent"===e.phase)return e.phase="event",e.timers={action:0,event:0,food:0,money:0,water:0},e.multiplier=1,void e.messages.push("You wake up in a wasteland. Where... when are you?");"event"!==e.phase&&"traveling"!==e.phase&&("preEvent"===e.phase||"postEvent"===e.phase&&e.exploration)&&(e.time=e.time+t)},k=function(e,t){"event"===e.phase&&(e.timers.event+=t,e.timers.event>1e3&&(e.timers.event=0,e.phase="postEvent"))},O=function(e,t){var r=e.timers;if("preEvent"===e.phase){r.food+=t;var n=Math.floor(r.food/1e3);if(n){var o=Object.entries(e.upgrades).reduce((function(e,t){var r,o=h(t,2),i=o[0],a=o[1],s=f(i);return s.effect.food?s.effect.food(e,null!==(r=null===a||void 0===a?void 0:a.level)&&void 0!==r?r:0):n}),n),i=Object.entries(e.timedUpgrades).reduce((function(t,r){var o=h(r,2),i=o[0],a=o[1];if(!a||e.time<a.time)return t;var s,u=f(i);return u.effect.food?u.effect.food(t,null!==(s=null===a||void 0===a?void 0:a.level)&&void 0!==s?s:0):n}),o);r.food=r.food%1e3,e.resources.food+=i}}},T=function(e,t){var r=e.timers,n=e.phase;if("postEvent"===n&&e.exploration){r.food+=t;var o=Math.floor(r.food/1e3);if(o){var i=Object.entries(e.upgrades).reduce((function(e,t){var r,i=h(t,2),a=i[0],s=i[1],u=f(a);return u.phase!==n?e:u.effect.food?u.effect.food(e,null!==(r=null===s||void 0===s?void 0:s.level)&&void 0!==r?r:0):o}),o);r.food=r.food%1e3,e.resources.food=Math.max(e.resources.food-i,0)}}},j=function(e,t){if("postEvent"===e.phase&&e.exploration){var r=u(e.exploration),n=!0,o=!1,i=void 0;try{for(var a,s=Object.entries(r.train)[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=h(a.value,2),f=l[0],c=l[1];c&&(e.stats[f].current+=t*c/2e4)}}catch(v){o=!0,i=v}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}}},I=function(e,t){if("postEvent"===e.phase&&e.resources.food<=0&&(e.phase="traveling",e.multiplier=1,e.timers={money:0,water:0,event:0,food:0,action:0},e.messages.push("With your supplies gone, the only thing left is to send help to your past. With luck, you'll survive.")),e.exploration){var r,o,i=u(e.exploration),a=100/i.time*t;null!==(r=(n=e.explorations)[e.exploration])&&void 0!==r||(n[e.exploration]={progress:0}),e.explorations[e.exploration].progress=Math.min((null!==(o=e.explorations[e.exploration].progress)&&void 0!==o?o:0)+a,100),100===e.explorations[e.exploration].progress&&(e.exploration=void 0,i.message&&e.messages.push(i.message))}};function _(e,t,r,n,o,i,a){try{var s=e[i](a),u=s.value}catch(l){return void r(l)}s.done?t(u):Promise.resolve(u).then(n,o)}function M(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var i=e.apply(t,r);function a(e){_(i,n,o,a,s,"next",e)}function s(e){_(i,n,o,a,s,"throw",e)}a(void 0)}))}}function S(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(u){o=!0,i=u}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var U="reconciliation_game",A="saved_game";d().config({version:1,name:U,storeName:U}),(0,v.vI)();var P=self;M(i().mark((function e(){var t,r,n,o;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=M(i().mark((function e(){var t;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d().getItem(A);case 2:return t=e.sent,e.abrupt("return",null!==t&&void 0!==t?t:a);case 4:case"end":return e.stop()}}),e)}))),e.next=3,t();case 3:r=e.sent,P.postMessage({type:"INITIAL",payload:r}),setInterval((function(){d().setItem(A,r)}),5e3),P.addEventListener("message",(function(e){var t=e.data,n=S((0,v.aS)(r,(function(e){if("RESET_GAME"===t.type)return d().removeItem(A),a;if("TRAVEL"!==t.type)return m(e,t);e.explorations={},e.resources={savedTime:e.resources.savedTime,food:a.resources.food,water:a.resources.water,money:a.resources.money};var r=e.timeline;e.timeline=[],e.time=0,e.phase="preEvent",e.upgrades=Object.fromEntries(Object.entries(e.upgrades).filter((function(e){var t=S(e,1)[0];return"preEvent"!==f(t).phase})).map((function(e){var t=S(e,2);return[t[0],t[1]]})));var n=0,o=!0,i=!1,s=void 0;try{for(var u,l=r[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var v=u.value;if(Math.floor(v.time/(0,c.Z)(24))>=t.payload.day)break;b(e,v.time-n),m(e,v.action),n=v.time-n}}catch(p){i=!0,s=p}finally{try{o||null==l.return||l.return()}finally{if(i)throw s}}b(e,(0,c.Z)(24)*t.payload.day-n)})),2),o=n[0],i=n[1];r=o,i.length&&P.postMessage({type:"UPDATE",payload:i})})),n=void 0,(o=function(){var e=(new Date).valueOf();void 0===n&&(n=e);var t=e-n,i=S((0,v.aS)(r,(function(e){b(e,t)})),2),a=i[0],s=i[1];r=a,s.length&&P.postMessage({type:"UPDATE",payload:s}),n=e,requestAnimationFrame(o)})();case 10:case"end":return e.stop()}}),e)})))()}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}},a=!0;try{e[n](i,i.exports,r),a=!1}finally{a&&delete t[n]}return i.exports}r.m=e,r.x=function(){var e=r.O(void 0,[29],(function(){return r(1075)}));return e=r.O(e)},function(){var e=[];r.O=function(t,n,o,i){if(!n){var a=1/0;for(f=0;f<e.length;f++){n=e[f][0],o=e[f][1],i=e[f][2];for(var s=!0,u=0;u<n.length;u++)(!1&i||a>=i)&&Object.keys(r.O).every((function(e){return r.O[e](n[u])}))?n.splice(u--,1):(s=!1,i<a&&(a=i));if(s){e.splice(f--,1);var l=o();void 0!==l&&(t=l)}}return t}i=i||0;for(var f=e.length;f>0&&e[f-1][2]>i;f--)e[f]=e[f-1];e[f]=[n,o,i]}}(),r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=function(e){return Promise.all(Object.keys(r.f).reduce((function(t,n){return r.f[n](e,t),t}),[]))},r.u=function(e){return"static/chunks/"+e+".94e24a4aa7dac217.js"},r.miniCssF=function(e){},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/incremental-game-jam-2022/_next/",function(){var e={75:1};r.f.i=function(t,n){e[t]||importScripts(r.p+r.u(t))};var t=self.webpackChunk_N_E=self.webpackChunk_N_E||[],n=t.push.bind(t);t.push=function(t){var o=t[0],i=t[1],a=t[2];for(var s in i)r.o(i,s)&&(r.m[s]=i[s]);for(a&&a(r);o.length;)e[o.pop()]=1;n(t)}}(),function(){var e=r.x;r.x=function(){return r.e(29).then(e)}}();var n=r.x();_N_E=n}();
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3104:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(134)}])},134:function(e,n,r){"use strict";r.r(n),r.d(n,{Index:function(){return de},default:function(){return fe}});var t=r(4637),i=r(9496),a=r(8253),o=new Worker(new URL(r.p+r.u(997),r.b));(0,a.vI)();var s=r(7634),c=(0,s.k)(void 0),l=(0,i.createContext)(void 0),u=c.Provider,d=function(e){return(0,s.S)(c,e)},f=l.Provider,m=function(){return(0,i.useContext)(l)},h=r(1626);function v(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function p(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var g=i.memo((function(e){var n=e.active,r=e.children,i=e.className,a=e.disabled,o=e.onClick,s=e.variant,c=void 0===s?"secondary":s,l=p(e,["active","children","className","disabled","onClick","variant"]);return(0,t.jsx)("button",function(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){v(e,n,r[n])}))}return e}({disabled:a,onClick:function(e){a||null===o||void 0===o||o(e)},className:(0,h.Z)("border border-gray-700 border-solid cursor-pointer px-2 relative",n&&"bg-blue-700 text-white","primary"===c&&"bg-blue-700 text-white","danger"===c&&"bg-red-900 text-white",a&&"opacity-50",i)},l,{children:null!==r&&void 0!==r?r:"\xa0"}))}));function y(e,n,r){return n in e?Object.defineProperty(e,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[n]=r,e}function x(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{},t=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(t=t.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),t.forEach((function(n){y(e,n,r[n])}))}return e}function b(e,n){if(null==e)return{};var r,t,i=function(e,n){if(null==e)return{};var r,t,i={},a=Object.keys(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||(i[r]=e[r]);return i}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(t=0;t<a.length;t++)r=a[t],n.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(i[r]=e[r])}return i}var j=i.memo((function(e){var n=e.children,r=e.className,i=b(e,["children","className"]);return(0,t.jsx)("div",x({className:(0,h.Z)(r)},i,{children:n}))})),w=i.memo((function(e){var n=e.children,r=e.className,i=e.active,a=e.onClick,o=b(e,["children","className","active","onClick"]);return(0,t.jsx)("button",x({onClick:function(e){i||null===a||void 0===a||a(e)},className:(0,h.Z)("cursor-pointer px-3 py-1 border-b-2 border-opacity-0 border-blue-600",i&&"border-opacity-100",r)},o,{children:n}))})),N=r(6696),E=function(){return(0,t.jsx)("div",{children:"Explore the area"})},C=function(){var e=m();return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Cheats: Multiplier"}),[1,10,100,5e3].map((function(n){return(0,t.jsxs)(g,{onClick:function(){e({type:"SET_MULTIPLIER",payload:{multiplier:n}})},children:["x",n]},n)}))]})},O=function(){var e=d((function(e){return e.messages})).slice(-3);return(0,t.jsx)("div",{className:"w-full p-4 text-gray-300 border",children:e.map((function(n,r){return(0,t.jsx)("p",{className:(0,h.Z)(r===e.length-2&&"text-gray-500",r===e.length-1&&"text-gray-900"),children:n},r)}))})},k=r(3683);function A(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done)&&(r.push(o.value),!n||r.length!==n);t=!0);}catch(c){i=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var T=function(e){var n=e.className,r=m(),i=A((0,k.Z)()({initial:"inactive",states:{inactive:{on:{RESET:"requiresConfirmation"}},requiresConfirmation:{on:{CONFIRM:"reset",CANCEL:"inactive"}},reset:{on:{INACTIVE:"inactive"},effect:function(e){r({type:"RESET_GAME"}),e("INACTIVE")}}}}),2),a=i[0],o=i[1];return(0,t.jsxs)("div",{className:n,children:["inactive"===a.value&&(0,t.jsx)(g,{variant:"danger",onClick:function(){o("RESET")},children:"Reset"}),"requiresConfirmation"===a.value&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g,{variant:"danger",onClick:function(){o("CONFIRM")},children:"Confirm Reset"}),(0,t.jsx)(g,{onClick:function(){o("CANCEL")},children:"Cancel"})]})]})},S=r(567),Z=r(2863),_=r(1344),I=r(6955),P=r.n(I),M=new Date(1997,7,29,2,14,0).valueOf(),D=(0,S.Z)(M,{days:30}).valueOf(),R=new Date(2978,1,23,1,14,0),B=function(e){var n=e.className,r=d((function(e){return e.time})),i=d((function(e){return e.resources})),a=i.things,o=i.savedTime,s=d((function(e){return e.phase})),c="postEvent"===s||"traveling"===s?R:D,l=(0,Z.Z)((0,_.Z)(c,1e3*r),"MMMM d, yyyy hh:mm bb");return(0,t.jsxs)("div",{className:n,children:["It is ",l,".",(0,t.jsxs)("p",{children:["You have"," ",P()(a).format({thousandSeparated:!0})," ","things."]}),("postEvent"===s||"traveling"===s)&&(0,t.jsxs)("p",{children:["You've saved up ",o," time."]})]})},U=[{phase:"preEvent",key:"upgradeThings",name:"Make things faster",description:"",max:100,costs:{things:function(e){return 10*e}},effect:{type:"add",things:function(e,n){return e*(n+1)}},flavorTexts:{1:"Set up something to make things faster."},requirements:{}},{phase:"postEvent",key:"postUpgradeThings",name:"Improve thing construction",description:"Use future tech to make things faster than ever before",max:10,costs:{savedTime:function(e){return 1*e}},effect:{type:"add",things:function(e,n){return e*(n+1)}},flavorTexts:{1:"Upgrade from the future!"},requirements:{}}],L=function(e){var n=U.find((function(n){return n.key===e}));if(!n)throw new Error("Could not find an upgrade with key: ".concat(e));return n},F=r(1882),q=r(8462),Y=r(2699);function G(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done)&&(r.push(o.value),!n||r.length!==n);t=!0);}catch(c){i=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function H(e){return function(e){if(Array.isArray(e)){for(var n=0,r=new Array(e.length);n<e.length;n++)r[n]=e[n];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var V=(0,N.Z)(24)/1e3,X=new Date(1997,7,29,2,14,0),z=(0,S.Z)(X,{days:30}),W=function(){var e=d((function(e){return e.timeline})),n=d((function(e){return e.timedUpgrades})),r=d((function(e){return e.phase})),a=d((function(e){return Math.floor(e.time/(0,F.Z)(24))})),o=(0,i.useState)(void 0),s=o[0],c=o[1],l=Object.entries(n).filter((function(e){return null!==(n=e[1])&&void 0!==n;var n})).map((function(e){var n=G(e,2),r=n[0],t=n[1],i=L(r);return{type:"permanent",time:t.time,text:"Time upgrade: ".concat(i.name)}})),u=e.map((function(e){return{type:"upgrade",time:e.time,text:Q(e.action)}})),f=H(l).concat(H(u)),m=(0,Y.groupBy)(f,(function(e){return Math.floor(e.time/V)}));return(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{children:"Timeline"}),(0,t.jsx)("ul",{className:"flex flex-nowrap",children:(0,Y.range)(0,30).map((function(e){var n,i,o=!!(null===(n=m[e])||void 0===n?void 0:n.find((function(e){return"upgrade"===e.type}))),l=!!(null===(i=m[e])||void 0===i?void 0:i.find((function(e){return"permanent"===e.type}))),u="traveling"===r&&void 0!==s&&s<=e||"preEvent"===r&&e<a;return(0,t.jsxs)("button",{className:(0,h.Z)("inline-grid relative border-2 border-gray-800 w-[32px] h-[32px] grid-cols-2 grid-rows-2 -ml-[2px]",u&&"border-opacity-20",e===s&&"shadow-[0_0_0_3px_red] z-10"),style:{gridTemplateAreas:'\n                "upgrade permanent"\n                ". ."\n              '},onClick:function(){c(s!==e?e:void 0)},children:[o&&(0,t.jsx)("div",{className:(0,h.Z)("[grid-area:upgrade] aspect-[1/1] bg-blue-700","traveling"===r&&void 0!==s&&s<=e&&"opacity-20")}),l&&(0,t.jsx)("div",{className:"[grid-area:permanent] aspect-[1/1] bg-green-500"})]},e)}))}),void 0!==s&&(0,t.jsx)(J,{selectedDay:s,timeline:m})]})},J=function(e){var n=e.selectedDay,r=e.timeline[n],i=d((function(e){return e.phase})),a=m();return(0,t.jsxs)("div",{children:[void 0!==r&&(0,t.jsx)("ul",{children:r.map((function(e){return(0,t.jsxs)("li",{className:"flex items-center",children:[(0,t.jsx)("div",{className:(0,h.Z)("w-[14px] h-[14px] inline-block mr-1","upgrade"===e.type?"bg-blue-700":"bg-green-500")}),(0,t.jsxs)("span",{className:(0,h.Z)("traveling"===i&&"upgrade"===e.type&&"text-gray-500"),children:[(0,Z.Z)((0,q.Z)(z,{seconds:1e3*e.time}),"hh:mm bb")," ",e.text]})]},e.time)}))}),void 0!==n&&"preEvent"!==i&&(0,t.jsx)(g,{variant:"danger",onClick:function(){a({type:"TRAVEL",payload:{day:n}})},children:"Restart Here"})]})},Q=function(e){switch(e.type){case"BUY_UPGRADE":return"Buy upgrade: ".concat(L(e.payload.key).name);default:throw new Error("No text found for action: ".concat(e.type))}},K=function(e){var n=e.className,r=d((function(e){return e.resources})),a=d((function(e){return e.phase})),o=d((function(e){return e.upgrades})),s=m(),c=(0,i.useMemo)((function(){return U.filter((function(e){return e.phase===a&&!((null!==(n=e.requirements.things)&&void 0!==n?n:0)>r.things);var n}))}),[a,r.things]);return(0,t.jsxs)("section",{className:(0,h.Z)("flex flex-col gap-2",n),children:[(0,t.jsx)("h2",{className:"sr-only",children:"Upgrades"}),c.map((function(e){var n,r=null!==(n=o[e.key])&&void 0!==n?n:0,i=e.flavorTexts[r];return(0,t.jsxs)("div",{className:"grid grid-cols-[auto,1fr] gap-x-2",children:[(0,t.jsxs)(g,{disabled:r===e.max,"aria-label":"Buy ".concat(e.name),onClick:function(){s({type:"BUY_UPGRADE",payload:{key:e.key}})},children:["Buy ",r>0&&"(".concat(r,")")]}),(0,t.jsx)("div",{children:e.name}),i&&(0,t.jsx)("p",{className:"col-start-2",children:i})]},e.key)}))]})},$=r(7189),ee=r.n($);function ne(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,i=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(t=(o=s.next()).done)&&(r.push(o.value),!n||r.length!==n);t=!0);}catch(c){i=!0,a=c}finally{try{t||null==s.return||s.return()}finally{if(i)throw a}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var re=function(e){var n=e.className;return(0,t.jsxs)("div",{className:(0,h.Z)("w-[80px] relative h-[400px] overflow-hidden",n),children:[(0,t.jsx)(ie,{className:"absolute top-0 left-0 w-full h-full"}),(0,t.jsx)(te,{className:"absolute top-0 left-0 w-full h-full"})]})},te=function(e){var n=e.className,r=-(120*((d((function(e){return e.time}))%(0,N.Z)(24)/(0,N.Z)(1)-6)/6)-60);return(0,t.jsx)("div",{className:(0,h.Z)("flex items-center justify-center",n),style:{transform:"translate(25%, ".concat(r,"%)")},children:(0,t.jsx)("div",{className:"w-8 h-8 bg-yellow-300 rounded-full filter blur-md"})})},ie=function(e){var n=e.children,r=e.className,i=d((function(e){return e.time})),a=ne(ae(i),2),o=a[0],s=a[1];return(0,t.jsx)("div",{className:(0,h.Z)("flex items-center justify-center",r),style:{background:"linear-gradient(".concat(s,", ").concat(o,")")},children:n})},ae=function(e){var n,r=e%(0,N.Z)(24)/(0,N.Z)(1),t=oe.findIndex((function(e){return e.time>r})),i=Math.max(t-1,0),a=Math.min(i+1,oe.length-1),o=oe[i],s=oe[a];if(s.time===o.time)n=0;else{var c=s.time-o.time;n=(r-o.time)/c}return[ee()(o.low,s.low,n),ee()(o.high,s.high,n)]},oe=[{time:0,low:"#000000",high:"#000000"},{time:5,low:"#000000",high:"#000000"},{time:6,low:"#E67B09",high:"#112044"},{time:7,low:"#E79617",high:"#536875"},{time:8,low:"#FADA77",high:"#343E56"},{time:9,low:"#E2D7A9",high:"#343E61"},{time:10,low:"#ABC3BF",high:"#314C87"},{time:12,low:"#8DBACD",high:"#3A6DAE"},{time:18,low:"#6FACC7",high:"#085997"},{time:19,low:"#B59A6D",high:"#6C778A"},{time:20,low:"#42677B",high:"#3372A1"},{time:21,low:"#13203C",high:"#000924"},{time:22,low:"#000000",high:"#000000"},{time:24,low:"#000000",high:"#000000"}],se=r(4224),ce=function(){var e=d((function(e){return e.time})),n=d((function(e){return e.phase})),r=(0,i.useState)("actions"),a=r[0],o=r[1],s=(0,i.useMemo)((function(){return(0,t.jsxs)("div",{className:"relative min-h-screen bg-gray-50",children:["event"===n&&(0,t.jsx)("div",{className:"absolute z-50 flex items-center justify-center min-w-full min-h-screen text-6xl bg-gray-900 text-gray-50",children:"LET'S DO THE TIME WARP"}),(0,t.jsxs)("div",{className:"grid py-4 mx-auto max-w-[1100px] grid-cols-[300px_1fr_1fr_60px] gap-3",style:{gridTemplateAreas:'\n            "status main messages window"\n            "timeline timeline timeline timeline"\n          '},children:[(0,t.jsxs)("aside",{className:"[grid-area:status]",children:[(0,t.jsx)(B,{className:"mb-3"}),!se.env.NEXT_DISABLE_CHEATS&&(0,t.jsx)(C,{}),(0,t.jsx)(T,{})]}),(0,t.jsxs)("main",{className:"[grid-area:main]",children:["preEvent"===n&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("h2",{children:"Upgrades"}),(0,t.jsx)(K,{})]}),"preEvent"!==n&&(0,t.jsxs)("div",{children:[(0,t.jsxs)(j,{className:"mb-2",children:[(0,t.jsx)(w,{active:"actions"===a,onClick:function(){o("actions")},children:"Actions"}),(0,t.jsx)(w,{active:"upgrades"===a,onClick:function(){o("upgrades")},children:"Upgrades"})]}),"upgrades"===a&&(0,t.jsx)(K,{}),"actions"===a&&(0,t.jsx)(E,{})]})]}),(0,t.jsx)(re,{className:"[grid-area:window] "}),(0,t.jsx)("div",{className:"[grid-area:messages]",children:(0,t.jsx)(O,{})}),(0,t.jsx)("div",{className:"[grid-area:timeline]",children:(0,t.jsx)(W,{})})]})]})}),[a,n]);return(0,t.jsx)("div",{className:e%(0,N.Z)(24)>(0,N.Z)(8)?"light":"dark",children:s})},le=(0,t.jsx)(ce,{}),ue=function(){var e=function(){var e=(0,i.useState)(void 0),n=e[0],r=e[1];o.onmessage=function(e){var t=e.data;"INITIAL"!==t.type?r((0,a.QE)(n,t.payload)):r(t.payload)};var t=(0,i.useCallback)((function(e){null===o||void 0===o||o.postMessage(e)}),[]);return(0,i.useMemo)((function(){return{dispatch:t,state:n}}),[t,n])}(),n=e.state,r=e.dispatch;return n?(0,t.jsxs)(u,{value:n,children:[(0,t.jsx)(f,{value:r,children:le}),(0,t.jsx)("pre",{children:JSON.stringify(n,null,2)})]}):(0,t.jsx)("div",{children:"Loading..."})},de=function(){var e=(0,i.useState)(!1),n=e[0],r=e[1];return(0,i.useEffect)((function(){r(!0)}),[]),n?(0,t.jsx)(ue,{}):(0,t.jsx)("div",{children:"Loading..."})},fe=de}},function(e){e.O(0,[201,897,774,888,179],(function(){return n=3104,e(e.s=n);var n}));var n=e.O();_N_E=n}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3104:function(e,r,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(5832)}])},5832:function(e,r,t){"use strict";t.r(r),t.d(r,{Index:function(){return Ce},default:function(){return Me}});var n=t(4637),a=t(9496),i=t(8253),o=new Worker(new URL(t.p+t.u(931),t.b));(0,i.vI)();var s=t(7634),c=(0,s.k)(void 0),l=(0,a.createContext)(void 0),u=c.Provider,d=function(e){return(0,s.S)(c,e)},f=l.Provider,p=function(){return(0,a.useContext)(l)},m=t(1626);function y(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function h(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var v=a.memo((function(e){var r=e.active,t=e.children,a=e.className,i=e.disabled,o=e.onClick,s=e.variant,c=void 0===s?"secondary":s,l=h(e,["active","children","className","disabled","onClick","variant"]);return(0,n.jsx)("button",function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){y(e,r,t[r])}))}return e}({disabled:i,onClick:function(e){i||null===o||void 0===o||o(e)},className:(0,m.Z)("border border-gray-700 border-solid cursor-pointer px-2",r&&"bg-blue-700 text-white","primary"===c&&"bg-blue-700 text-white","danger"===c&&"bg-red-900 text-white",i&&"opacity-50",a)},l,{children:null!==t&&void 0!==t?t:"\xa0"}))})),g=function(e){var r=e.progress,t=e.variant,a=void 0===t?"secondary":t;return(0,n.jsx)("div",{className:(0,m.Z)("w-full h-1 origin-left","secondary"===a?"bg-blue-700":"bg-yellow-400"),style:{transform:"scaleX(".concat(r,"%)")}})};function x(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function w(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})))),n.forEach((function(r){x(e,r,t[r])}))}return e}function b(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t,n,a={},i=Object.keys(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)t=i[n],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var k=a.memo((function(e){var r=e.children,t=e.className,a=b(e,["children","className"]);return(0,n.jsx)("div",w({className:(0,m.Z)(t)},a,{children:r}))})),j=a.memo((function(e){var r=e.children,t=e.className,a=e.active,i=e.onClick,o=b(e,["children","className","active","onClick"]);return(0,n.jsx)("button",w({onClick:function(e){a||null===i||void 0===i||i(e)},className:(0,m.Z)("cursor-pointer px-3 py-1 border-b-2 border-opacity-0 border-blue-600",a&&"border-opacity-100",t)},o,{children:r}))})),E=t(6696),T=t(6955),N=t.n(T),I=[{key:"letsy",name:"Letsy",resource:"money"},{key:"crafts",name:"Crafts",resource:"money"},{key:"well",name:"Well Water",resource:"water"},{key:"stream",name:"Filtered Water",resource:"water"},{key:"rainfall",name:"Rainfall",resource:"water"},{key:"preserves",name:"Preserves",resource:"food"},{key:"plants",name:"Plants",resource:"food"},{key:"scrap",name:"Scrap",resource:"junk"}],S=[{key:"food",name:"Rations",format:function(e){return N()(e).format({thousandSeparated:!0})},formatWithType:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," rations")}},{key:"water",name:"Water",format:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," liters")},formatWithType:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," liters water")}},{key:"money",name:"Money",format:function(e){return"$".concat(N()(e).format({thousandSeparated:!0}))},formatWithType:function(e){return"$".concat(N()(e).format({thousandSeparated:!0}))}},{key:"junk",name:"Junk",format:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," lb")},formatWithType:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," lb junk")}},{key:"power",name:"Saved Time",format:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," AH")},formatWithType:function(e){return"".concat(N()(e).format({thousandSeparated:!0})," AH")}}],P=function(e){var r=S.find((function(r){return r.key===e}));if(!r)throw new Error("Could not find a resource with key: ".concat(e));return r},A=[{name:"Perception",key:"perception"},{name:"Endurance",key:"endurance"},{name:"Patience",key:"patience"},{name:"Tech",key:"tech"},{name:"Strength",key:"strength"}],O=function(e){var r=A.find((function(r){return r.key===e}));if(!r)throw new Error("Could not find a skill with key: ".concat(e));return r},C=t(1882),M=((0,C.Z)(360),(0,C.Z)(504),(0,C.Z)(264),[{key:"E1",name:"Explore the area",description:"My home hasn't changed, but everything past 500 feet is shrouded in dust.",message:"Something is really messed up with the area around here. Space is warped.",drain:{food:1,water:2},train:{perception:1,endurance:2},time:8e5,requirements:{}},{key:"T1",name:"Watch warped spaces",description:"These warped spaces seem random, but maybe if I watch them for long enough, they'll start to make sense.",message:'I\'m calling these "time holes" until I think of a better name.',drain:{food:1,water:1},train:{perception:2,patience:2},time:16e5,requirements:{action:"E1"}},{key:"T2",name:"Watch smaller time holes",description:"I'm not ready to jump into a time hole, but watching from a distance couldn't hurt, right?",message:'Hey! I saw another Barry in one of the holes and called out, and he seemed to notice. It looks like I could influence the past, at least with very short messages. Maybe I\'ll start with "more water."',drain:{food:1,water:1},train:{patience:2},time:16e5,requirements:{action:"T1"}},{key:"E2",name:"Explore something",description:"[something something go out further?]",message:"",drain:{food:2,water:2},train:{endurance:2},time:1e6,requirements:{action:"T2"}},{key:"T3",name:"Figure out lost time",description:"Time passes more slowly when I'm closer to a time hole, which makes the rest of the world move faster. I could find out how close I can get, and tell Past Barry about this.",message:"For now, I could safely get time to pass about twice as fast. That'll be better than watching radishes grow.",drain:{food:2,water:2},train:{perception:2},time:1e6,requirements:{action:"E2"}},{key:"E3",name:"Explore outside home",description:"Guess it's time to head into what's left of town.",message:"",drain:{food:2,water:2},train:{endurance:2},time:1e6,requirements:{action:"T3"}},{key:"E4",name:"Explore school ruins",description:"There's a school nearby, though there isn't much left of it. This might get me some good info for Past Barry.",message:"Hey, there's an old #7291 generator here! I can't believe they still use these. It's not working, but I could fix it if I had the parts.",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"E3"}},{key:"F1",name:"Look for parts",description:"Someone took this thing apart. I'm going to need some M8 bolts and a socket to match.",message:"",drain:{food:2,water:2},train:{perception:2,tech:2},time:1e6,requirements:{action:"E4"}},{key:"F2",name:"Look for instructions",description:"",message:"",drain:{food:2,water:2},train:{strength:2,tech:2},time:1e6,requirements:{action:"F1"}},{key:"F3",name:"Fix the generator",description:"",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"F2"}},{key:"E5",name:"Explore machine shop",description:"I found the ruins of what looks like an old machine shop. Maybe I can find something to help out Past Barry.",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"E3"}},{key:"E6",name:"Explore big time holes",description:"There are a bunch of bigger time holes near a fasion district. I might be able to send larger items through these - maybe even travel?",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,requirements:{action:"E3"}},{key:"S1",name:"Move wreckage",description:"There's a really interesting time hole up the stairs, but I'll have to move some wreckage out of the way to get to it.",message:"",drain:{food:2,water:2},train:{strength:2},time:1e6,requirements:{action:"E6"}},{key:"T4",name:"Convince yourself",description:"Hey! I saw myself from just a day a ago! This time hole seems to fight me a lot less. Maybe I could just jump through?",message:"After a lot of arguing with Past Barry, we agreed to swap places when the time comes. I have no idea what'll happen to him, but that sounds like Future Barry problems, not mine.",drain:{food:2,water:2},train:{patience:2},time:1e6,requirements:{action:"S1"}}]);function q(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var D=[{phase:"preEvent",key:"PF1",type:"purchased",name:"Canning supplies",description:"I could preserve food if I got some basic canning supplies.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",food:function(e){return e}},effectDescription:"+1 preserved food per level",flavorTexts:{},requirements:{money:100},source:"preserves"},{phase:"preEvent",key:"PF2",type:"purchased",name:"Gas burner",description:"Buy a big old propane gas burner to boil water much faster.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"multiply",food:function(e){return 2*e}},effectDescription:"x2 preserved food per level",flavorTexts:{},requirements:{upgrade:{key:"PF1",level:3}},source:"preserves"},{phase:"preEvent",key:"PF6",type:"purchased",name:"Pressure canner",description:"A pressure canner would let me preserve more stuff without getting botulism.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",food:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 time required for preserved food per level",flavorTexts:{},requirements:{upgrade:{key:"PF1",level:5}},source:"preserves"},{phase:"preEvent",key:"PF3",type:"purchased",name:"Plant some fast-growing crops",description:"Looks like I'll be eating a lot of radishes and green onions.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",food:function(e){return e}},effectDescription:"+1 plant food per level",flavorTexts:{},requirements:{food:100},source:"plants"},{phase:"preEvent",key:"PF4",type:"purchased",name:"Set up hydroponics",description:"I can get some plants to grow faster, and more variety would be nice.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",food:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 plant growing time per level",flavorTexts:{},requirements:{upgrade:{key:"PF3",level:3}},source:"plants"},{phase:"preEvent",key:"PW1",type:"purchased",name:"Set up rainwater collection",description:"Buy and set up barrels and tarps for rainwater collection.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e}},effectDescription:"+1 rainwater per level",flavorTexts:{},requirements:{money:300},source:"rainfall"},{phase:"preEvent",key:"PW2",type:"purchased",name:"Buy a cistern",description:"Getting a big water container should make collection easier.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",water:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 rainwater time per level",flavorTexts:{},requirements:{upgrade:{key:"PW1",level:3}},source:"rainfall"},{phase:"preEvent",key:"PW3",type:"purchased",name:"Buy a water filter",description:"I can filter some water from the stream nearby.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e}},effectDescription:"+1 filtered water per level",flavorTexts:{},requirements:{water:100},source:"stream"},{phase:"preEvent",key:"PW4",type:"purchased",name:"Switch to an electric filter",description:"Manually cranking this filter is way too much work when I have electricity.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",water:function(e){return Math.pow(.8,e)}},effectDescription:"*0.8 filtered water time per level",flavorTexts:{},requirements:{upgrade:{key:"PW3",level:3}},source:"stream"},{phase:"preEvent",key:"PW5",type:"purchased",name:"Drill a deeper well",description:"My well's not going to collect enough water right now. I should get someone to drill deeper.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e+1}},effectDescription:"+1 well water per level",flavorTexts:{},requirements:{water:300},source:"well"},{phase:"preEvent",key:"PW6",type:"purchased",name:"Overcharge well",description:"",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",water:function(e){return e+2}},effectDescription:"x2 well water per level",flavorTexts:{},requirements:{upgrade:{key:"PW5",level:3}},source:"well"},{phase:"preEvent",key:"PM1",type:"purchased",name:"Sell your stuff",description:"I should set up a Letsy account and pawn off some of my junk for steady income.",max:5,costs:{junk:function(e){return 10*e}},effect:{type:"add",money:function(e){return e+1}},effectDescription:"+$1 sales per level",flavorTexts:{},requirements:{},source:"letsy"},{phase:"preEvent",key:"PM2",type:"purchased",name:"Advertise your Letsy store",description:"Maybe I can get rid of these vintage Neil Breen DVDs.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"time",money:function(e){return Math.pow(.8,e)}},effectDescription:"x0.8 sale time per level",flavorTexts:{},requirements:{upgrade:{key:"PM1",level:3}},source:"letsy"},{phase:"preEvent",key:"PM5",type:"purchased",name:"Set up multiple accounts",description:"It's against their Terms of Service, but they probably won't notice.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"multiply",money:function(e){return e+1}},effectDescription:"x2 sales per level",flavorTexts:{},requirements:{upgrade:{key:"PM1",level:5}},source:"letsy"},{phase:"preEvent",key:"PM3",type:"purchased",name:"Sell some scrap art",description:"I've got a shed full of scrap metal I could weld together into art.",max:5,costs:{junk:function(e){return 10*e}},effect:{type:"add",money:function(e){return e+1}},effectDescription:"+1 crafts sale per level",flavorTexts:{},requirements:{money:200},source:"crafts"},{phase:"preEvent",key:"PM4",type:"purchased",name:"Sell some scrap art",description:"There's a market for industrial furniture. Might as well make some, for people who believe the world's just fine.",max:5,costs:{junk:function(e){return 10*e}},effect:{type:"multiply",money:function(e){return e+2}},effectDescription:"x2 sale value per level",flavorTexts:{},requirements:{upgrade:{key:"PM3",level:3}},source:"crafts"},{phase:"postEvent",key:"TW1",type:"purchased",name:"Condensate Capture",description:"Pluck water out of the air instead of relying on rainfall.",max:5,costs:{food:function(e,r){return 100*e+10*r}},effect:{type:"multiply",water:function(e){return e+1}},effectDescription:"x2 rainwater, can collect without rainfall",flavorTexts:{},requirements:{exploration:"E3"},source:"rainfall"},{phase:"preEvent",key:"EW1",type:"event",name:"Rainfall stops",description:"The rain has stopped, so I'm not getting any water that way. I hope it starts up again soon.",max:2,costs:{},effect:{type:"multiply",water:function(e){return e-1}},effectDescription:"",flavorTexts:{1:"The rain has stopped, so I'm not getting any water that way. I hope it starts up again soon.",2:"The rain has stopped. Luckily, not a problem for the condensate collector. Thanks, Future Barry!"},requirements:{},source:"rainfall"},{phase:"preEvent",key:"EW2",type:"event",name:"Stream contaminated",description:"The stream's started to smell like paint. I'm not sure what happened, but I'm not going to trust it now.",max:2,costs:{},effect:{type:"multiply",water:function(e){return e-1}},effectDescription:"",flavorTexts:{1:"The stream's started to smell like paint. I'm not sure what happened, but I'm not going to trust it now.",2:"The stream's started to smell like paint, but that's not a problem for this filter. Nice thinking, Future Barry!"},requirements:{},source:"stream"},{phase:"preEvent",key:"EM1",type:"event",name:"Letsy downtime",description:"Letsy just had an outage, and it's been flaky ever since. My income there has dropped in half.",max:2,costs:{},effect:{type:"multiply",money:function(e){return 1===e?.5:1}},effectDescription:"",flavorTexts:{1:"Letsy just had an outage, and it's been flaky ever since. My income there has dropped in half.",2:""},requirements:{},source:"letsy"},{phase:"preEvent",key:"PJ1",type:"purchased",name:"Set up scrap delivery",description:"There's a local scrapyard I could pay for regular deliveries.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",junk:function(e){return e}},effectDescription:"+1 scrap metal per level",flavorTexts:{},requirements:{money:50},source:"scrap"},{phase:"preEvent",key:"PJ2",type:"purchased",name:"Improve scrap quality",description:"Pay the scrapyard a bit more for less rust and more usable pieces.",max:5,costs:{money:function(e){return 10*e}},effect:{type:"add",junk:function(e){return e}},effectDescription:"+1 scrap metal per level",flavorTexts:{},requirements:{money:100},source:"scrap"}],U=function(e){var r=D.find((function(r){return r.key===e}));if(!r)throw new Error("Could not find an upgrade with key: ".concat(e));return r},Z=function(e){var r,t,n,a=e.phase,i=e.upgrade,o=e.resources,s=e.maxResources,c=e.distance,l=e.purchasedUpgrades,u=e.timedUpgrades,d=e.playerExplorations,f=null!==(n=null===(r=l[i.key])||void 0===r?void 0:r.level)&&void 0!==n?n:null===(t=u[i.key])||void 0===t?void 0:t.level;if(!B({phase:a,upgrade:i,purchasedUpgrades:l,timedUpgrades:u,playerExplorations:d,resources:o,maxResources:s}))return!1;var p=(null!==f&&void 0!==f?f:0)+1,m=!0,y=!1,h=void 0;try{for(var v,g=Object.keys(i.costs)[Symbol.iterator]();!(m=(v=g.next()).done);m=!0){var x=v.value,w=i.costs[x];if(w&&w(p,c)>o[x])return!1}}catch(b){y=!0,h=b}finally{try{m||null==g.return||g.return()}finally{if(y)throw h}}return p<=i.max},B=function(e){var r,t,n,a,i=e.phase,o=e.upgrade,s=e.purchasedUpgrades,c=e.timedUpgrades,l=e.playerExplorations,u=e.maxResources;if("event"===o.type||o.phase!==i&&("postEvent"!==o.phase||"traveling"!==i))return!1;if(null===(r=s[o.key])||void 0===r?void 0:r.level)return!0;var d=!0,f=!1,p=void 0;try{for(var m,y=Object.entries(o.requirements)[Symbol.iterator]();!(d=(m=y.next()).done);d=!0){var h=q(m.value,2),v=h[0],g=h[1];if(("food"===v||"water"===v||"money"===v)&&u[v]<g)return!1}}catch(k){f=!0,p=k}finally{try{d||null==y.return||y.return()}finally{if(f)throw p}}if(o.requirements.exploration&&100!==(null===(t=l[o.requirements.exploration])||void 0===t?void 0:t.progress))return!1;var x,w,b=o.requirements.upgrade;return!b||((null!==(x=null===(n=s[b.key])||void 0===n?void 0:n.level)&&void 0!==x?x:0)>=b.level||(null!==(w=null===(a=c[b.key])||void 0===a?void 0:a.level)&&void 0!==w?w:0)>=b.level)},_=function(e){var r=e.upgrade,t=e.currentLevel,n=e.distance,a=(null!==t&&void 0!==t?t:0)+1;return Object.entries(r.costs).map((function(e){var r=q(e,2),t=r[0],i=r[1];return i?{key:t,cost:i(a,n)}:{key:t,cost:0}}))},R=function(e){return null!==e&&void 0!==e};function F(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function W(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var L=function(){var e=d((function(e){return e.exploration})),r=d((function(e){return e.phase})),t=d((function(e){return e.explorations})),a=p(),i=M.filter((function(e){var r,n;return 100!==(null===(r=t[e.key])||void 0===r?void 0:r.progress)&&(!e.requirements.action||100===(null===(n=t[e.requirements.action])||void 0===n?void 0:n.progress))}));return(0,n.jsx)("div",{children:(0,n.jsx)("ul",{children:i.map((function(i){var o,s,c=null!==(s=null===(o=t[i.key])||void 0===o?void 0:o.progress)&&void 0!==s?s:0;return(0,n.jsxs)("li",{className:"flex flex-col gap-2 p-2 mb-2 border rounded-md",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,n.jsx)(v,{disabled:"traveling"===r,onClick:function(){a({type:"EXPLORE",payload:{location:i.key}})},children:i.key===e?"Stop":"Go"}),i.name]}),(0,n.jsx)("p",{children:i.description}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:G(i.train)}),H(i.drain)&&(0,n.jsx)("p",{children:H(i.drain)})]}),(0,n.jsx)(g,{progress:c})]},i.key)}))})})},G=function(e){var r=Object.entries(e).map((function(e){var r=W(e,2),t=r[0];return r[1]?O(t).name:null})).filter(R).join(", ");return"Skills: ".concat(r)},H=function(e){var r=Object.entries(e).map((function(e){var r=W(e,2),t=r[0],n=r[1];if(!n)return null;var a=P(t);return"".concat(a.name," ").concat(n,"x")})).filter(R).join(", ");return r?"Drains: ".concat(r):""},X=function(){var e=d((function(e){return e.messages})).slice().reverse();return(0,n.jsx)("div",{className:"w-full space-y-2",children:e.map((function(e,r){return(0,n.jsxs)("p",{className:(0,m.Z)("relative",V(e.priority,r)),children:[(0,n.jsx)("span",{className:(0,m.Z)("absolute top-[0] bottom-[0] left-[0] w-1","alert"===e.priority?"bg-red-500":" bg-gray-300 dark:bg-gray-600")}),(0,n.jsx)("span",{className:"block pl-3",children:e.text})]},r)}))})},V=function(e,r){return"info"===e?r>0&&"text-gray-700 dark:text-gray-400":r>0?"text-red-700":"text-red-500"},Y=t(3683);function J(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var K=function(e){var r=e.className,t=p(),a=J((0,Y.Z)()({initial:"inactive",states:{inactive:{on:{RESET:"requiresConfirmation"}},requiresConfirmation:{on:{CONFIRM:"reset",CANCEL:"inactive"}},reset:{on:{INACTIVE:"inactive"},effect:function(e){t({type:"RESET_GAME"}),e("INACTIVE")}}}}),2),i=a[0],o=a[1];return(0,n.jsxs)("div",{className:r,children:["inactive"===i.value&&(0,n.jsx)(v,{variant:"danger",onClick:function(){o("RESET")},children:"Reset"}),"requiresConfirmation"===i.value&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{variant:"danger",onClick:function(){o("CONFIRM")},children:"Confirm Reset"}),(0,n.jsx)(v,{onClick:function(){o("CANCEL")},children:"Cancel"})]})]})},$=t(567),z=t(2863),Q=t(1344),ee=t(2699);function re(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var te=new Date(1997,7,29,2,14,0).valueOf(),ne=(0,$.Z)(te,{days:30}).valueOf(),ae=new Date(2978,1,23,1,14,0),ie=function(e){var r=e.className,t=d((function(e){return e.time})),a=d((function(e){return e.resources})),i=d((function(e){return e.phase})),o=d((function(e){return e.loops})),s=d((function(e){return e.skills})),c=d((function(e){return e.upgrades})),l=d((function(e){return e.timedUpgrades})),u=d((function(e){return e.unlocks})),f=function(e){var r=e.upgrades,t=e.time,n=e.timedUpgrades;return Object.entries(r).map((function(e){var r=F(e,2),t=r[0],n=r[1];return n?{key:t,level:n.level,upgrade:U(t)}:null})).concat(Object.entries(n).map((function(e){var r=F(e,2),n=r[0],a=r[1];return!a||a.time>t?null:{key:n,level:a.level,upgrade:U(n)}}))).filter(R).sort((function(e,r){var t=e.upgrade.effect.type,n=r.upgrade.effect.type;return t===n?0:"add"===t&&"multiply"===n?-1:1}))}({upgrades:c,time:t,timedUpgrades:l}),p=(0,ee.groupBy)(f,(function(e){return e.upgrade.source})),m="postEvent"===i||"traveling"===i?ae:ne,y=(0,z.Z)((0,Q.Z)(m,1e3*t),"MMMM d, yyyy HH:mm");return(0,n.jsxs)("div",{className:r,children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"mb-2",children:["It is ",y,"."]}),(0,n.jsx)("h2",{className:"font-bold",children:"Inventory"}),(0,n.jsx)("ul",{children:["food","water","money","junk","power"].map((function(e){var r=P(e);return(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:r.name}),(0,n.jsx)("span",{children:r.format(a[e])})]}),"preEvent"===i&&(0,n.jsx)("ul",{className:"ml-2",children:I.filter((function(r){return r.resource===e})).map((function(e){var t=(0,C.Z)(24);if(!p[e.key])return null;var a=function(e,r){return e.reduce((function(e,t){var n=t.upgrade,a=n.effect[r.resource];return a&&"add"===n.effect.type?e+a(t.level):a&&"multiply"===n.effect.type?e*a(t.level):e}),0)}(p[e.key],e)*(t/function(e,r){return e.reduce((function(e,t){var n=t.upgrade.effect[r.resource];return n&&"time"===t.upgrade.effect.type?Math.floor(e*n(t.level)):e}),5e3)}(p[e.key],e));return(0,n.jsx)("li",{children:(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("span",{children:[r.format(Math.floor(a)),"/day"]})]})},e.key)}))})]},e)}))})]}),!!("postEvent"===i||"traveling"===i||o>0)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-bold",children:"Skills"}),(0,n.jsx)("ul",{children:Object.entries(s).map((function(e){var r,t,a=re(e,2),i=a[0],o=a[1];return(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:O(i).name}),(0,n.jsx)("span",{children:Math.floor(o.current)})]}),(0,n.jsx)(g,{progress:100*(null!==(r=o.current)&&void 0!==r?r:0)%100}),u.loop&&(0,n.jsx)(g,{variant:"primary",progress:100*(null!==(t=o.permanent)&&void 0!==t?t:0)%100})]},i)}))})]})]})},oe=t(8462);function se(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ce(e){return function(e){if(Array.isArray(e)){for(var r=0,t=new Array(e.length);r<e.length;r++)t[r]=e[r];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var le=(0,E.Z)(24)/1e3,ue=new Date(1997,7,29,2,14,0),de=(0,$.Z)(ue,{days:30}),fe=function(e){var r=e.selectedUpgradeKey,t=e.setSelectedUpgrade,i=d((function(e){return e.timeline})),o=d((function(e){return e.timedUpgrades})),s=d((function(e){return e.upgrades})),c=d((function(e){return e.explorations})),l=d((function(e){return e.phase})),u=d((function(e){return e.resources})),f=d((function(e){return e.maxResources})),p=d((function(e){return Math.floor(e.time/(0,C.Z)(24))})),y=(0,a.useState)(void 0),h=y[0],v=y[1],g=r?U(r):void 0,x=Object.entries(o).filter((function(e){return R(e[1])})).map((function(e){var r=se(e,2),t=r[0],n=r[1],a=U(t);return{type:"purchased"===a.type?"permanent":"event",time:n.time,text:"".concat("purchased"===a.type?"Timed upgrade":"Event",": ").concat(a.name)}})),w=i.map((function(e){return{type:"upgrade",time:e.time,text:me(e.action)}})),b=ce(x).concat(ce(w)),k=(0,ee.groupBy)(b,(function(e){return Math.floor(e.time/le)}));return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Timeline"}),(0,n.jsx)("ul",{className:"flex flex-nowrap",children:(0,ee.range)(0,30).map((function(e){var r,t,a,i=!!(null===(r=k[e])||void 0===r?void 0:r.find((function(e){return"upgrade"===e.type}))),d=!!(null===(t=k[e])||void 0===t?void 0:t.find((function(e){return"permanent"===e.type}))),y=!!(null===(a=k[e])||void 0===a?void 0:a.find((function(e){return"event"===e.type}))),x=g&&!Z({phase:l,upgrade:g,resources:u,maxResources:f,distance:29-e,purchasedUpgrades:s,timedUpgrades:o,playerExplorations:c})||"traveling"===l&&void 0!==h&&h<=e||"preEvent"===l&&e<p;return(0,n.jsxs)("button",{className:(0,m.Z)("inline-grid relative border-2 border-gray-800 dark:border-gray-300 w-[32px] h-[32px] grid-cols-2 grid-rows-2 -ml-[2px]",x&&"border-opacity-20 dark:border-opacity-20",e===h&&"shadow-[0_0_0_3px_red] z-10"),style:{gridTemplateAreas:'\n                "upgrade permanent"\n                "event ."\n              '},onClick:function(){v(h!==e?e:void 0)},children:[i&&(0,n.jsx)("div",{className:(0,m.Z)("[grid-area:upgrade] aspect-[1/1] bg-blue-700","traveling"===l&&void 0!==h&&h<=e&&"opacity-20")}),d&&(0,n.jsx)("div",{className:"[grid-area:permanent] aspect-[1/1] bg-green-500"}),y&&(0,n.jsx)("div",{className:"[grid-area:event] aspect-[1/1] bg-red-500"})]},e)}))}),void 0!==h&&(0,n.jsx)(pe,{selectedDay:h,setSelectedDay:v,timeline:k,selectedUpgrade:g,setSelectedUpgrade:t})]})},pe=function(e){var r,t=e.selectedDay,a=e.setSelectedDay,i=e.timeline,o=e.selectedUpgrade,s=e.setSelectedUpgrade,c=i[t],l=d((function(e){return e.phase})),u=d((function(e){return e.timedUpgrades})),f=d((function(e){return e.resources})),y=p();return(0,n.jsxs)("div",{className:"relative grid grid-cols-[1fr_50px]",style:{gridTemplateAreas:'\n      "restart close"\n      "events events"\n    '},children:[(0,n.jsx)(v,{className:"[grid-area:close]",onClick:function(){a(void 0)},children:"X"}),o&&(0,n.jsx)("div",{className:"[grid-area:restart]",children:(0,n.jsxs)(v,{onClick:function(){y({type:"BUY_TIMED_UPGRADE",payload:{key:o.key,day:t}}),s(void 0)},children:["Send Upgrade (",_({upgrade:o,resources:f,currentLevel:null===(r=u[o.key])||void 0===r?void 0:r.level,distance:29-t}).map((function(e){return"".concat(e.cost," ").concat(e.key)})).join(","),")"]})}),void 0!==t&&"preEvent"!==l&&!o&&(0,n.jsx)("div",{className:"[grid-area:restart]",children:(0,n.jsx)(v,{variant:"danger",onClick:function(){a(void 0),y({type:"TRAVEL",payload:{day:t}})},children:"Restart Here"})}),void 0!==c&&(0,n.jsx)("ul",{className:"[grid-area:events]",children:c.map((function(e){return(0,n.jsxs)("li",{className:"flex items-center",children:[(0,n.jsx)("div",{className:(0,m.Z)("w-[14px] h-[14px] inline-block mr-1","upgrade"===e.type?"bg-blue-700":"event"===e.type?"bg-red-500":"bg-green-500")}),(0,n.jsxs)("span",{className:(0,m.Z)("traveling"===l&&"upgrade"===e.type&&"text-gray-500"),children:[(0,z.Z)((0,oe.Z)(de,{seconds:1e3*e.time}),"hh:mm bb")," ",e.text]})]},e.time)}))})]})},me=function(e){switch(e.type){case"BUY_UPGRADE":return"Buy upgrade: ".concat(U(e.payload.key).name);case"BUY_TIMED_UPGRADE":var r=U(e.payload.key);return"purchased"===r.type?"Timed upgrade: ".concat(r.name):"Event: ".concat(r.name);default:throw new Error("No text found for action: ".concat(e.type))}};function ye(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var he=function(e){var r=e.className,t=e.selectedUpgrade,i=e.setSelectedUpgrade,o=d((function(e){return e.resources})),s=d((function(e){return e.maxResources})),c=d((function(e){return e.phase})),l=d((function(e){return e.upgrades})),u=d((function(e){return e.timedUpgrades})),f=d((function(e){return e.explorations})),y=p(),h=(0,a.useMemo)((function(){return D.filter((function(e){return!!B({upgrade:e,phase:c,playerExplorations:f,purchasedUpgrades:l,timedUpgrades:u,resources:o,maxResources:s})}))}),[s,c,f,l,o,u]);return(0,n.jsx)("ul",{className:(0,m.Z)("flex flex-col gap-2",r),children:h.map((function(e){var r,a,d=null!==(a=null===(r=l[e.key])||void 0===r?void 0:r.level)&&void 0!==a?a:0,p=e.flavorTexts[d],h=Object.entries(e.costs).map((function(e){var r=ye(e,2),t=r[0],n=r[1];return n?P(t).formatWithType(n(d+1,0)):null})).filter(Boolean).join(", ");return(0,n.jsxs)("li",{className:(0,m.Z)("flex flex-col p-2 border rounded-sm gap-x-2",e.requirements.upgrade&&"ml-2"),children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,n.jsxs)(v,{disabled:!Z({upgrade:e,phase:c,playerExplorations:f,purchasedUpgrades:l,timedUpgrades:u,distance:0,resources:o,maxResources:s}),"aria-label":"Buy ".concat(e.name),active:t===e.key,onClick:function(){"postEvent"!==e.phase?y({type:"BUY_UPGRADE",payload:{key:e.key}}):i((function(r){return r===e.key?void 0:e.key}))},children:["Buy ",d>0&&"(".concat(d!==e.max?d:"MAX",")")]}),(0,n.jsxs)("div",{children:[e.name," ",d!==e.max&&"(".concat(h,")")]})]}),d!==e.max&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("p",{children:e.effectDescription}),(0,n.jsx)("p",{children:e.description})]}),p&&(0,n.jsx)("p",{className:"col-start-2",children:p})]},e.key)}))})},ve=t(7189),ge=t.n(ve);function xe(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t=[],n=!0,a=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done)&&(t.push(o.value),!r||t.length!==r);n=!0);}catch(c){a=!0,i=c}finally{try{n||null==s.return||s.return()}finally{if(a)throw i}}return t}(e,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var we=function(e){var r=e.className;return(0,n.jsxs)("div",{className:(0,m.Z)("w-[80px] relative h-full overflow-hidden rounded-md",r),children:[(0,n.jsx)(ke,{className:"absolute top-0 left-0 w-full h-full"}),(0,n.jsx)(be,{className:"absolute top-0 left-0 w-full h-full"})]})},be=function(e){var r=e.className,t=-(120*((d((function(e){return e.time}))%(0,C.Z)(24)/(0,C.Z)(1)-6)/6)-60);return(0,n.jsx)("div",{className:(0,m.Z)("flex items-center justify-center",r),style:{transform:"translate(25%, ".concat(t,"%)")},children:(0,n.jsx)("div",{className:"w-8 h-8 bg-yellow-300 rounded-full filter blur-md"})})},ke=function(e){var r=e.children,t=e.className,a=d((function(e){return e.time})),i=xe(je(a),2),o=i[0],s=i[1];return(0,n.jsx)("div",{className:(0,m.Z)("flex items-center justify-center",t),style:{background:"linear-gradient(".concat(s,", ").concat(o,")")},children:r})},je=function(e){var r,t=e%(0,C.Z)(24)/(0,C.Z)(1),n=Ee.findIndex((function(e){return e.time>t})),a=Math.max(n-1,0),i=Math.min(a+1,Ee.length-1),o=Ee[a],s=Ee[i];if(s.time===o.time)r=0;else{var c=s.time-o.time;r=(t-o.time)/c}return[ge()(o.low,s.low,r),ge()(o.high,s.high,r)]},Ee=[{time:0,low:"#111827",high:"#111827"},{time:5,low:"#111827",high:"#111827"},{time:6,low:"#E67B09",high:"#112044"},{time:7,low:"#E79617",high:"#536875"},{time:8,low:"#FADA77",high:"#343E56"},{time:9,low:"#E2D7A9",high:"#343E61"},{time:10,low:"#ABC3BF",high:"#314C87"},{time:12,low:"#8DBACD",high:"#3A6DAE"},{time:18,low:"#6FACC7",high:"#085997"},{time:19,low:"#B59A6D",high:"#6C778A"},{time:20,low:"#42677B",high:"#3372A1"},{time:21,low:"#13203C",high:"#111827"},{time:22,low:"#111827",high:"#111827"},{time:24,low:"#111827",high:"#111827"}],Te=function(){var e=d((function(e){return e.timers.event}));return(0,n.jsxs)("div",{className:"absolute z-50 flex items-center justify-center min-w-full min-h-screen text-6xl bg-gray-900 text-gray-50",children:["TIMESKIP (",e,")"]})},Ne=function(){return(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Barry's Time Adventures"}),(0,n.jsx)("p",{children:"[A]ll out of Barrys"})]})},Ie=function(){var e=d((function(e){return e.time})),r=d((function(e){return e.phase})),t=(0,a.useState)("explorations"),i=t[0],o=t[1],s=(0,a.useState)(),c=s[0],l=s[1],u=d((function(e){return e.unlocks})),f=(0,a.useMemo)((function(){return(0,n.jsxs)("div",{className:(0,m.Z)("relative min-h-screen",Se(r)),children:["event"===r&&(0,n.jsx)(Te,{}),"done"===r&&(0,n.jsx)(Ne,{}),(0,n.jsxs)("div",{className:(0,m.Z)("px-4 grid py-2 mx-auto min-w-[1080px] max-w-[1680px] gap-3","grid-rows-[1fr_auto]","grid-cols-[400px_1fr_240px_auto]","lg:grid-cols-[400px_1fr_240px_auto]"),style:{gridTemplateAreas:'\n            "timeline timeline timeline timeline"\n            "messages main status window"\n          '},children:[(0,n.jsxs)("aside",{className:"[grid-area:status]",children:[!1,(0,n.jsx)(ie,{className:"mb-3"}),(0,n.jsx)(K,{})]}),(0,n.jsxs)("main",{className:"[grid-area:main]",children:["preEvent"===r&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"mb-2",children:"Upgrades"}),(0,n.jsx)(he,{selectedUpgrade:c,setSelectedUpgrade:l})]}),"preEvent"!==r&&(0,n.jsxs)("div",{children:[(0,n.jsxs)(k,{className:"mb-2",children:[(0,n.jsx)(j,{active:"explorations"===i,onClick:function(){o("explorations")},children:"Exploration"}),(0,n.jsx)(j,{active:"upgrades"===i,onClick:function(){o("upgrades")},children:"Send Upgrades"})]}),"upgrades"===i&&(0,n.jsx)(he,{selectedUpgrade:c,setSelectedUpgrade:l}),"explorations"===i&&(0,n.jsx)(L,{})]})]}),(0,n.jsx)(we,{className:"[grid-area:window]"}),(0,n.jsx)("div",{className:"[grid-area:messages]",children:(0,n.jsx)(X,{})}),u.pastRestart&&(0,n.jsx)("div",{className:"[grid-area:timeline]",children:(0,n.jsx)(fe,{selectedUpgradeKey:c,setSelectedUpgrade:l})})]})]})}),[i,r,c,u.pastRestart]);return(0,n.jsx)("div",{className:e%(0,E.Z)(24)>(0,E.Z)(8)?"light":"dark",children:f})},Se=function(e){return"preEvent"===e?"bg-gray-50 dark:bg-gray-900 dark:text-gray-100":"bg-stone-50 dark:bg-stone-900 dark:text-stone-100"},Pe=t(3139),Ae=(0,n.jsx)(Ie,{}),Oe=function(){var e=function(){var e=(0,a.useState)(void 0),r=e[0],t=e[1];o.onmessage=function(e){var n=e.data;"INITIAL"!==n.type?t((0,i.QE)(r,n.payload)):t(n.payload)};var n=(0,a.useCallback)((function(e){null===o||void 0===o||o.postMessage(e)}),[]);return(0,a.useMemo)((function(){return{dispatch:n,state:r}}),[n,r])}(),r=e.state,t=e.dispatch;(0,Pe.useRouter)();return r?(0,n.jsxs)(u,{value:r,children:[(0,n.jsx)(f,{value:t,children:Ae}),!1]}):(0,n.jsx)("div",{className:"flex items-center justify-center min-w-full min-h-screen",children:"Loading..."})},Ce=function(){var e=(0,a.useState)(!1),r=e[0],t=e[1];return(0,a.useEffect)((function(){t(!0)}),[]),r?(0,n.jsx)(Oe,{}):(0,n.jsx)("div",{className:"flex items-center justify-center min-w-full min-h-screen",children:"Loading..."})},Me=Ce}},function(e){e.O(0,[201,457,10,774,888,179],(function(){return r=3104,e(e.s=r);var r}));var r=e.O();_N_E=r}]);
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{3104:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return r(5654)}])},5654:function(e,t,r){"use strict";r.r(t),r.d(t,{Index:function(){return Ve},default:function(){return Je}});var n=r(4637),a=r(9496),o=r(8253),i=new Worker(new URL(r.p+r.u(280),r.b));(0,o.vI)();var s=r(7634),l=(0,s.k)(void 0),c=(0,a.createContext)(void 0),u=l.Provider,d=function(e){return(0,s.S)(l,e)},p=c.Provider,h=function(){return(0,a.useContext)(c)},m=r(6696),f=r(1626);function y(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var v=a.memo((function(e){var t=e.active,r=e.children,a=e.className,o=e.disabled,i=e.onClick,s=e.variant,l=void 0===s?"secondary":s,c=g(e,["active","children","className","disabled","onClick","variant"]);return(0,n.jsx)("button",function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){y(e,t,r[t])}))}return e}({disabled:o,onClick:function(e){o||null===i||void 0===i||i(e)},className:(0,f.Z)("border border-gray-700 border-solid cursor-pointer px-2",t&&"bg-blue-700 text-white","primary"===l&&"bg-blue-700 text-white","danger"===l&&"bg-red-900 text-white",o&&"opacity-50",a)},c,{children:null!==r&&void 0!==r?r:"\xa0"}))})),w=function(e){var t=e.progress,r=e.variant,a=void 0===r?"secondary":r;return(0,n.jsx)("div",{className:(0,f.Z)("w-full h-1 origin-left","secondary"===a?"bg-blue-700":"bg-yellow-400"),style:{transform:"scaleX(".concat(t,"%)")}})};function x(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function b(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){x(e,t,r[t])}))}return e}function k(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var j=a.memo((function(e){var t=e.children,r=e.className,a=k(e,["children","className"]);return(0,n.jsx)("div",b({className:(0,f.Z)(r)},a,{children:t}))})),E=a.memo((function(e){var t=e.children,r=e.className,a=e.active,o=e.onClick,i=k(e,["children","className","active","onClick"]);return(0,n.jsx)("button",b({onClick:function(e){a||null===o||void 0===o||o(e)},className:(0,f.Z)("cursor-pointer px-3 py-1 border-b-2 border-opacity-0 border-blue-600",a&&"border-opacity-100",r)},i,{children:t}))})),M=a.memo((function(e){var t=e.children,r=e.className,a=d((function(e){return e.phase})),o=d((function(e){return e.loops}));return"preEvent"===a||"expand"===a||"collapse"===a?(0,n.jsx)("span",{className:r,children:t}):(0,n.jsx)("span",{className:r,children:I(T(N(t,o),o),o)})})),T=function(e,t){var r=.05*Math.min(t,10);if(Math.random()<r){var n=Math.floor(Math.random()*e.length),a=Math.floor(Math.random()*e.length);return S(e,n,a)}return e},I=function(e,t){var r=.01*Math.min(t,10);return Math.random()<r?e.toLowerCase().replace(/[.!?:,;]/g,""):e},N=function(e,t){var r=.01*Math.min(t,10),n=Math.random();return n<r/3?"".concat(e," I'm fine. I am Fine. BARRY #").concat(t," IS FINE."):n<r*(2/3)?e.toUpperCase().replace(/[\.\?]$/,"!!"):n<r?e.replace(/[\.\?]$/,"!"):e},S=function(e,t,r){return e.slice(0,t)+e[r]+e.slice(t+1,r)+e[t]+e.slice(r+1)},P=function(){var e=d((function(e){return e.messages})).slice().reverse();return(0,n.jsx)("div",{className:"w-full space-y-2",children:e.map((function(e,t){return(0,n.jsxs)("p",{className:(0,f.Z)("relative",q(e.priority,t)),children:[(0,n.jsx)("span",{className:(0,f.Z)("absolute top-[0] bottom-[0] left-[0] w-1","alert"===e.priority?"bg-red-400":"news"===e.priority?"bg-blue-500":"bg-gray-600")}),(0,n.jsx)(M,{className:"block pl-3",children:e.text})]},e.text)}))})},q=function(e,t){return"alert"===e?t>0?"text-red-500":"text-red-400":t>0&&"text-gray-400"},B=r(3683);function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var C=function(e){var t=e.className,r=h(),a=F((0,B.Z)()({initial:"inactive",states:{inactive:{on:{RESET:"requiresConfirmation"}},requiresConfirmation:{on:{CONFIRM:"reset",CANCEL:"inactive"}},reset:{on:{INACTIVE:"inactive"},effect:function(e){r({type:"RESET_GAME"}),e("INACTIVE")}}}}),2),o=a[0],i=a[1];return(0,n.jsxs)("div",{className:t,children:["inactive"===o.value&&(0,n.jsx)(v,{variant:"danger",onClick:function(){i("RESET")},children:"Hard Reset"}),"requiresConfirmation"===o.value&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("div",{children:"This will completely reset your game."}),(0,n.jsx)(v,{variant:"danger",onClick:function(){i("CONFIRM")},children:"Confirm Reset"}),(0,n.jsx)(v,{onClick:function(){i("CANCEL")},children:"Cancel"})]})]})},U=r(567),A=r(2863),O=r(1344),Z=r(1882),R=r(6955),L=r.n(R),_=[{key:"letsy",name:"Letsy",resource:"money"},{key:"crafts",name:"Crafts",resource:"money"},{key:"well",name:"Well Water",resource:"water"},{key:"stream",name:"Filtered Water",resource:"water"},{key:"rainfall",name:"Rainfall",resource:"water"},{key:"preserves",name:"Preserves",resource:"food"},{key:"plants",name:"Plants",resource:"food"},{key:"scrap",name:"Scrap",resource:"junk"},{key:"copies",name:"Barrys",resource:"barry"}],W=function(e){var t=_.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find a source with key: ".concat(e));return t},D=[{key:"food",name:"Rations",format:function(e){return L()(Math.floor(e)).format({thousandSeparated:!0})},formatWithType:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," rations")}},{key:"water",name:"Water",format:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," liters")},formatWithType:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," liters water")}},{key:"money",name:"Money",format:function(e){return L()(e).formatCurrency({thousandSeparated:!0,currencySymbol:"$",mantissa:2})},formatWithType:function(e){return L()(e).formatCurrency({thousandSeparated:!0,currencySymbol:"$",mantissa:2})}},{key:"junk",name:"Junk",format:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," lb")},formatWithType:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," lb junk")}},{key:"power",name:"Power",format:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," amp hours")},formatWithType:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0})," amp hours")}},{key:"barry",name:"Barrys",format:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0}))},formatWithType:function(e){return"".concat(L()(Math.floor(e)).format({thousandSeparated:!0}))}}],G=function(e){var t=D.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find a resource with key: ".concat(e));return t},H=[{name:"Perception",key:"perception"},{name:"Endurance",key:"endurance"},{name:"Patience",key:"patience"},{name:"Tech",key:"tech"},{name:"Strength",key:"strength"}],z=function(e){var t=H.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find a skill with key: ".concat(e));return t},X=((0,Z.Z)(290),(0,Z.Z)(416),(0,Z.Z)(365),(0,Z.Z)(220),2),Y=[{key:"E1",name:"Explore the area",description:"My home hasn't changed, but everything past 500 feet is shrouded in dust.",message:"Something is really messed up with the area around here. Looks like desert haze, but... I can see other places in it?",drain:{food:1,water:2},train:{perception:1.1,endurance:2},time:4e5,timeMultiplier:2,requirements:{}},{key:"T1",name:"Watch haze",description:"These hazy areas seem random, but maybe if I watch them for long enough, they'll start to make sense.",message:"I'm definitely looking at different time periods through these. Some of these go back thousands of years. I'm calling these \"time holes\" until I think of a better name.",drain:{food:1,water:1},train:{perception:2.2,patience:2.1},time:6e5,timeMultiplier:2,requirements:{action:"E1"}},{key:"T2",name:"Watch smaller time holes",description:"I'm not ready to jump into a time hole, but watching from a distance couldn't hurt, right?",message:'Hey! I saw another Barry in one of the holes and called out, and he seemed to notice. It looks like I could influence the past, at least with very short messages. Maybe I\'ll start with "more water."',drain:{food:1,water:1},train:{patience:3},time:8e5,timeMultiplier:2,requirements:{action:"T1"}},{key:"E2",name:"Explore something",description:"[something something go out further?]",message:"",drain:{food:2,water:2},train:{endurance:2.5},time:1e6,timeMultiplier:2,requirements:{action:"T2"}},{key:"T3",name:"Figure out lost time",description:"Time passes more slowly when I'm closer to a time hole, which makes the rest of the world move faster. I could find out how close I can get, and tell Past Barry about this.",message:"For now, I could safely get time to pass about 5X as fast. That'll be better than watching radishes grow.",drain:{food:2,water:2},train:{perception:1.9},time:1e6,timeMultiplier:2,requirements:{action:"E2"}},{key:"E3",name:"Explore outside home",description:"Guess it's time to head into what's left of town. This could be a very long trip.",message:"[something about this taking a while]",drain:{food:2,water:2},timeMultiplier:2,train:{endurance:3},time:1e7,requirements:{action:"T3"}},{key:"E4",name:"Explore school ruins",description:"There's a school nearby, though there isn't much left of it. This might get me some good info for Past Barry.",message:"Hey, there's an old #7291 generator here! I can't believe they still use these. It's not working, but I could fix it if I had the parts.",drain:{food:2,water:2},train:{perception:2.1,endurance:1.7},time:1e6,timeMultiplier:2,requirements:{action:"E3"},removed:"E8"},{key:"F1",name:"Look for gas generator parts",description:"Someone took this generator apart. I'm going to need some M8 bolts and a socket to match.",message:"It's reassembled, but still won't start. Maybe there's a troubleshooting guide around here.",drain:{food:2,water:2},train:{perception:1.5,tech:3},time:1e6,timeMultiplier:2,requirements:{action:"E4"},removed:"E8"},{key:"F2",name:"Look for instructions",description:"There's got to be an instruction manual around here somewhere.",message:"Hours later, I gave up, and finally found it taped to the bottom of the generator. Someone's laughing right now.",drain:{food:2,water:2},train:{perception:3.3,endurance:1.5},time:1e6,timeMultiplier:2,requirements:{action:"F1"},removed:"E8"},{key:"F3",name:"Fix the gas generator",description:"This is going to be a lot of trial and error.",message:"It's running! The lights are on. Time to see what else powered up. There isn't much that'll run off this.",drain:{food:2,water:2},train:{tech:2,patience:1},time:1e6,timeMultiplier:2,requirements:{action:"F2"},removed:"E8"},{key:"T5",name:"Figure out computer",description:"A computer booted up, but there's no keyboard, mouse, touchscreen... anything? I feel really dumb right now.",message:"Turns out it's like focusing on one of those Magic Eye images - just defocus, and the computer takes over. I bet I can use this technique to shove much more information into Past Barry's head.",drain:{food:2,water:2},train:{tech:2,patience:1},time:1e6,timeMultiplier:2,requirements:{action:"F3"},removed:"E8"},{key:"F5",name:"Find more useful information",description:"Now that I can communicate with Past Barry, I should see what else is on here.",message:"Here we go. I found a method of compressing food into smaller containers. That should help out with preservation.",drain:{food:2,water:2},train:{tech:2,endurance:2},time:1e6,timeMultiplier:2,requirements:{action:"T5"},removed:"E8"},{key:"E5",name:"Explore power plant",description:"I found the ruins of what looks like a power plant. Maybe I can find something to help out Past Barry.",message:"",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,timeMultiplier:2,requirements:{action:"E3"},removed:"E8"},{key:"S2",name:"Pry open the door",description:"The building's in surprisingly good condition... meaning I'll need to break in.",message:"",drain:{food:2,water:2},train:{strength:2},time:1e6,timeMultiplier:2,requirements:{action:"E5"},removed:"E8"},{key:"E7",name:"Search for a usable generator",description:"Most of the plant doesn't look functional, but maybe I can find something usable.",message:'Found a "Mr Fusion" in pretty good condition. Guess I should feed it?',drain:{food:2,water:2},train:{perception:2},time:1e6,timeMultiplier:2,requirements:{action:"S2"},removed:"E8"},{key:"G1",name:"Generate power",description:"I can generate power by feeding this thing my resources. I'll start with any junk or money I have, since I don't think there's much use for those here.",message:"Mr. Fusion just coughed up the last of what I gave it and let off some smoke. I think it's generated its last.",drain:{food:1,water:1},train:{patience:2},time:1e7,timeMultiplier:2,requirements:{action:"E7"},generates:{power:2}},{key:"E6",name:"Explore big time holes",description:"There are a bunch of bigger time holes near a sewage treatment plant (which thankfully hasn't run for a long time). I might be able to send larger items through these - maybe even travel?",message:"There's a really interesting time hole up some stairs, but I'll have to move some wreckage out of the way to get to it.",drain:{food:2,water:2},train:{perception:2,endurance:2},time:1e6,timeMultiplier:2,requirements:{action:"E3"},removed:"E8"},{key:"S1",name:"Move wreckage",description:"Get to the big time hole by moving heavy things. Here we go, Strong Barry.",message:"I'm exhausted and never want to lift heavy things again, but I can get to the time hole now.",drain:{food:3,water:4},train:{strength:3},time:1e6,timeMultiplier:2,requirements:{action:"E6"},removed:"E8"},{key:"T4",name:"Convince yourself",description:"Hey! I saw myself from just a day a ago! This time hole seems to fight me a lot less. I think I could have a conversation with myself.",message:"After a lot of arguing with Past Barry, we agreed to jump in and swap places when the time comes. I have no idea what'll happen to him, but that sounds like Future Barry problems, not mine.",drain:{food:2,water:2},train:{patience:2},time:1e6,timeMultiplier:2,requirements:{action:"S1"},removed:"E8"},{key:"E12",name:"Search around for anything else",description:"This is a treatment plant. There should be something useful here for, you know, water.",message:"Here we go! One unused carbon nanotube filter. This would have been really useful back in the day. With enough power, I should be able to send this back to Past Barry.",drain:{food:2,water:2},train:{patience:2},time:1e6,timeMultiplier:2,requirements:{action:"T4"},removed:"E8"},{key:"E14",name:"Search car lot",description:"There are hundreds of cars in a lot nearby. Most are wrecks by now, but maybe I can find a working one.",message:"There's a promising RIMC coupe left on blocks with decent tires. Windows are smashed, battery's dead, fuel cell's empty. I'm not fixing the windows.",drain:{food:2,water:3},train:{endurance:2},time:1e6,timeMultiplier:2,requirements:{action:"E3"}},{key:"E15",name:"Replace fuel cell",description:"Lot of work, but it'll be easier to replace this cell than find a fueling station.",message:"Found a half-full cell in a nearby car, and with a lot of effort, got it installed. I just have to deal with that battery now.",drain:{food:2,water:3},train:{strength:3,tech:3},time:1e6,timeMultiplier:2,requirements:{action:"E14"}},{key:"E16",name:"Start the car",description:"There's no chance I'll find a live battery here. Best I can do is push it down the nearest hill and hope it starts on the way down.",message:"I had to push the car a half-mile, but IT'S ALIVE! This thing is in rough shape, but I hope it'll make it to the next town.",drain:{food:2,water:3},train:{strength:2.5},time:2e6,timeMultiplier:2,requirements:{action:"E15"}},{key:"E8",name:"Keep moving",description:"Head out to the light industrial zone. This will be a long drive. If I have anything to do here first, I should do it.",message:"Rough trip, but I'm finally glad I lived near a tech hub. Lots of places to explore here.",drain:{food:1,water:1},train:{tech:2,patience:1.5},timeMultiplier:15,time:2e8,requirements:{action:"E16"}},{key:"E9",name:"Explore factory",description:"A factory! Factory HAS to mean automation, right?",message:"",drain:{food:1,water:1},train:{perception:2,tech:1.5},timeMultiplier:2,time:4e7,requirements:{action:"E8"}},{key:"S3",name:"Climb to second floor",description:"There's a room that looks intact on the second floor, but I'll have to pile things up to reach it.",message:"There's a whole stockpile of smartphone-looking things, and nearly every battery on every one of these is dead. Maybe one of them is still alive.",drain:{food:1,water:1},train:{strength:3},timeMultiplier:2,time:4e7,requirements:{action:"E9"}},{key:"F4",name:"Find a working smartphone thing",description:"One of thigns things has to still have a working battery. Hope I don't have anything else to do today.",message:"Found one! This is way beyond a smartphone - it could purchase just about anything in the world in one tap. Future people were even more into buying stuff than we were. I'll send one of these to Past Barry right away.",drain:{food:1,water:2},train:{patience:2.5,tech:2},timeMultiplier:2,time:4e7,requirements:{action:"S3"}},{key:"E19",name:"Look around for anything else",description:"It's a factory! They make stuff! Come on, there has to be something of use here.",message:"Found something - a compact condensate capture system. This can pull water right out of the air instead of waiting for rainfall. Past Barry would have loved this. It's too bad the air's too dry for it to be of any use here.",drain:{food:1,water:2},train:{patience:2,tech:2.1},timeMultiplier:2,time:4e7,requirements:{action:"F4"}},{key:"E10",name:"Explore arcology",description:"There's a huge skyscraper here, bigger than anything we ever had. Bet they have all kinds of great agriculture advancements here, at least.",message:"Oh man, everything is huge here! Especially the weeds. This could take a while.",drain:{food:4,water:2},train:{endurance:1.4,perception:3},timeMultiplier:2,time:2e7,requirements:{action:"E8"}},{key:"S4",name:"Hack through weeds",description:"The weeds here are as tall as trees. Better get hacking.",message:"I got to a flight of stairs, and the higher levels look much clearer.",drain:{food:4,water:4},train:{strength:3},timeMultiplier:2,time:2e7,requirements:{action:"E10"}},{key:"S5",name:"Climb the stairs",description:"There's nothing interesting on the first level. Maybe there's something intact up the stairs?",message:"After 200 flights up the stairs, I reached the rooftop gardens... there's a small bag called \"Fluxed Phyto-Gro\" up here. Claims it's got What Plants Crave. I should send this stuff to Past Barry.",drain:{food:2,water:2},train:{strength:2.4,endurance:1.6},time:2e7,timeMultiplier:2,requirements:{action:"S4"}},{key:"S6",name:"Break into the power room",description:"These arcologies are supposed to be completely self-contained, so there must be a power room here.",message:"Found it, and the lock was no match for a crowbar and a lot of persistence. And hey! Another Mr. Fusion!",drain:{food:2,water:2},train:{strength:2,tech:2.1},time:2e7,timeMultiplier:2,requirements:{action:"S5"}},{key:"G2",name:"Generate power",description:"It's another Mr. Fusion, but this one's in better shape. Same deal, I'll start with any junk or money and move on to the rest.",message:"It lasted longer this time, but *poof* it goes. This is way too advanced for me to fix.",drain:{food:1,water:1},train:{patience:2},time:1e7,timeMultiplier:2,requirements:{action:"S5"},generates:{power:4}},{key:"E11",name:"Travel to next city",description:"Things are bad here, but are they this bad everywhere? I'll take the car as long as it'll go, and walk the rest of the way. This could be the longest trip so far.",message:"Things are this bad everywhere. I didn't meet anyone.",drain:{food:2,water:2},train:{patience:1,endurance:1,strength:1,tech:1,perception:1},timeMultiplier:20,time:16e8,requirements:{action:"E8"}},{key:"E18",name:"Walk to source of time holes",description:"The city's in the same condition as the last one, but there's something new here. There's a place, looks like a campus building... it's almost surrounded by that haze. I'm going to see why that is.",message:"",drain:{food:1,water:1},train:{patience:1.5,endurance:1.5,strength:1.5,tech:1.5,perception:1.5},timeMultiplier:2,time:2e7,requirements:{action:"E11"}},{key:"S7",name:"Break in",description:"",message:"",drain:{food:1,water:1},train:{patience:1.5,endurance:1.5,strength:1.5,tech:1.5,perception:1.5},timeMultiplier:2,time:2e7,requirements:{action:"E18"}},{key:"S7",name:"Walk downstairs",description:"Something in the basement is calling to me. There are a lot of stairs.",message:"I lost count, 20 flights of stairs? There's a machine here. I don't know what it does, but I can somehow feel this was responsible.",drain:{food:1,water:1},train:{patience:1.5,endurance:1.5,strength:1.5,tech:1.5,perception:1.5},timeMultiplier:2,time:2e7,requirements:{action:"S7"}},{key:"F6",name:"Get information off computers",description:"This building is still powered, which is strange. I should get any information I can off the computers running here.",message:"This is it. Whatever they were doing here? This is the source of all my problems. It looks like once they created the first time hole, they tried to fix the problem by collapsing the anomaly in on itself, but it just caused it to multiply out of control.",drain:{food:2,water:2},train:{patience:1.5,endurance:1.5,strength:1.5,tech:1.5,perception:1.5},timeMultiplier:2,time:2e7,requirements:{action:"S7"}},{key:"F7",name:"Fix the problem",description:"As far as I can tell, they were on the right track, but they just didn't try hard enough. This console doesn't look that complicated, why not just get rid of the first time hole? Maybe that'll make the rest go away?",message:"Oh god oh god oh god that didn't fix it at all. It's worse, it's so much worse. It's fracturing worse than ever, I can see all the other Barrys I switched with. I think that time itself might be... angry.",drain:{food:1,water:1},train:{patience:1.5,endurance:1.5,strength:1.5,tech:1.5,perception:1.5},timeMultiplier:2,time:2e7,requirements:{action:"F6"}},{key:"F8",name:"Fix the problem harder",description:"Just keep trying to collapse these things. Something has to work.",message:"One of the Barrys just stepped through. Now all of the Barrys have stepped through. I don't think I'm going to fix this.",drain:{food:1,water:1},train:{patience:1.5,endurance:1.5,strength:1.5,tech:1.5,perception:1.5},timeMultiplier:2,time:2e7,requirements:{action:"F7"}},{key:"T6",name:"Converge timelines",description:"I guess I should say hi to the other Barrys.",message:"",drain:{},train:{perception:1.5},timeMultiplier:1,time:100,requirements:{action:"F8"}}];function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var J=[{phase:"preEvent",key:"PM1",type:"purchased",name:"Sell your stuff",description:"I should set up a Letsy account and pawn off some of my junk for steady income.",max:50,costs:{junk:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"add",money:function(e){return 5*e}},flavorTexts:{},requirements:{},source:"letsy"},{phase:"preEvent",key:"PM2",type:"purchased",name:"Advertise your Letsy store",description:"Maybe I can get rid of these vintage Neil Breen DVDs.",max:10,costs:{money:function(e){return 50*e}},effect:{type:"time",money:function(e){return Math.pow(.75,Math.log2(e)+1)}},flavorTexts:{},requirements:{upgrade:{key:"PM1",level:3}},source:"letsy"},{phase:"preEvent",key:"PM5",type:"purchased",name:"Set up multiple accounts",description:"It's against their Terms of Service, but they probably won't notice.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+200*e}},effect:{type:"multiply",money:function(e){return 1.1*e+1}},flavorTexts:{},requirements:{upgrade:{key:"PM1",level:5}},source:"letsy"},{phase:"preEvent",key:"PM3",type:"purchased",name:"Sell some scrap art",description:"I've got a shed full of scrap metal I could weld together into art.",max:50,costs:{junk:function(e){return Math.pow(e,2.5)+10*e}},effect:{type:"add",money:function(e){return 5*e}},flavorTexts:{},requirements:{money:200},source:"crafts"},{phase:"preEvent",key:"PM4",type:"purchased",name:"Sell furniture",description:"There's a market for industrial furniture. Might as well make some, for people who believe the world's just fine.",max:50,costs:{junk:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"multiply",money:function(e){return Math.pow(1.15,e)}},flavorTexts:{},requirements:{upgrade:{key:"PM3",level:3}},source:"crafts"},{phase:"preEvent",key:"PJ1",type:"purchased",name:"Set up scrap delivery",description:"There's a local scrapyard I could pay for regular deliveries.",max:50,costs:{money:function(e){return Math.pow(e,2)+10*e}},effect:{type:"add",junk:function(e){return 5*e}},flavorTexts:{},requirements:{money:20},source:"scrap"},{phase:"preEvent",key:"PJ2",type:"purchased",name:"Improve scrap quality",description:"Pay the scrapyard a bit more for less rust and more usable pieces.",max:50,costs:{money:function(e){return Math.pow(e,3)+100*e}},effect:{type:"multiply",junk:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{upgrade:{key:"PJ1",level:5}},source:"scrap"},{phase:"preEvent",key:"PF1",type:"purchased",name:"Canning supplies",description:"I could preserve food if I got some basic canning supplies.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"add",food:function(e){return 4*e}},flavorTexts:{},requirements:{money:150},source:"preserves"},{phase:"preEvent",key:"PF2",type:"purchased",name:"Gas burner",description:"Buy a big old propane gas burner to boil water much faster.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"multiply",food:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{upgrade:{key:"PF1",level:3}},source:"preserves"},{phase:"preEvent",key:"PF6",type:"purchased",name:"Pressure canner",description:"A pressure canner would let me preserve more stuff without getting botulism.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"time",food:function(e){return Math.pow(.85,Math.log2(e)+1)}},flavorTexts:{},requirements:{upgrade:{key:"PF1",level:5}},source:"preserves"},{phase:"preEvent",key:"PF3",type:"purchased",name:"Plant some fast-growing crops",description:"Looks like I'll be eating a lot of radishes and green onions.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"add",food:function(e){return 4*e}},flavorTexts:{},requirements:{food:100},source:"plants"},{phase:"preEvent",key:"PF4",type:"purchased",name:"Set up hydroponics",description:"I can get some plants to grow faster, and more variety would be nice.",max:50,costs:{money:function(e){return Math.pow(e,3.4)+10*e}},effect:{type:"time",food:function(e){return Math.pow(.85,Math.log2(e)+1)}},flavorTexts:{},requirements:{upgrade:{key:"PF3",level:3}},source:"plants"},{phase:"preEvent",key:"PF7",type:"purchased",name:"Buy grow lights",description:"More lights mean more plants, right?",max:50,costs:{money:function(e){return Math.pow(e,3)+100*e}},effect:{type:"multiply",food:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{upgrade:{key:"PF4",level:5}},source:"plants"},{phase:"preEvent",key:"PW5",type:"purchased",name:"Drill a deeper well",description:"My well's not going to collect enough water right now. I should get someone to drill deeper.",max:50,costs:{money:function(e){return Math.pow(e,3)+10*e}},effect:{type:"add",water:function(e){return 4*e}},flavorTexts:{},requirements:{money:300},source:"well"},{phase:"preEvent",key:"PW6",type:"purchased",name:"Overcharge well",description:"",max:50,costs:{money:function(e){return Math.pow(e,3)+10*e}},effect:{type:"multiply",water:function(e){return Math.pow(1.05,e)}},flavorTexts:{},requirements:{upgrade:{key:"PW5",level:5}},source:"well"},{phase:"preEvent",key:"PW1",type:"purchased",name:"Set up rainwater collection",description:"Buy and set up barrels and tarps for rainwater collection.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"add",water:function(e){return 4*e}},flavorTexts:{},requirements:{water:100},source:"rainfall"},{phase:"preEvent",key:"PW2",type:"purchased",name:"Buy a cistern",description:"Getting a big water container should make collection easier.",max:10,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"time",water:function(e){return Math.pow(.75,Math.log2(e)+1)}},flavorTexts:{},requirements:{upgrade:{key:"PW1",level:3}},source:"rainfall"},{phase:"preEvent",key:"PW3",type:"purchased",name:"Buy a water filter",description:"I can filter some water from the stream nearby.",max:50,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"add",water:function(e){return 4*e}},flavorTexts:{},requirements:{water:200},source:"stream"},{phase:"preEvent",key:"PW4",type:"purchased",name:"Switch to an electric filter",description:"Manually cranking this filter is way too much work when I have electricity.",max:10,costs:{money:function(e){return Math.pow(e,3.5)+10*e}},effect:{type:"time",water:function(e){return Math.pow(.7,Math.log2(e)+1)}},flavorTexts:{},requirements:{upgrade:{key:"PW3",level:3}},source:"stream"},{phase:"postEvent",key:"TW1",type:"purchased",name:"Condensate Capture",description:"Pluck water out of the air instead of relying on rainfall.",max:50,costs:{power:function(e,t){return Math.pow(e,3.5)+10*t}},effect:{type:"multiply",water:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{exploration:"E19"},source:"rainfall"},{phase:"postEvent",key:"TM1",type:"purchased",name:"Mirror Letsy",description:"Mirror the entire Letsy site, but only make my shop accessible.",max:50,costs:{power:function(e,t){return Math.pow(e,3.5)+10*t}},effect:{type:"multiply",money:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{exploration:"E3"},source:"letsy"},{phase:"postEvent",key:"TW2",type:"purchased",name:"Carbon Nanotube Filter",description:"This thing could filter anything out of anything. Past Barry could have used this for that contamination problem.",max:50,costs:{power:function(e,t){return Math.pow(e,3.5)+10*t}},effect:{type:"multiply",water:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{exploration:"E12"},source:"stream"},{phase:"postEvent",key:"TF1",type:"purchased",name:"Food Compression",description:"Cram more food into a single jar. Canning supply shortages won't affect Past Barry!",max:5,costs:{power:function(e,t){return Math.pow(e,3.5)+10*t}},effect:{type:"multiply",food:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{exploration:"F5"},source:"preserves"},{phase:"postEvent",key:"TF2",type:"purchased",name:"Fluxed Phyto-Gro",description:"Forces plants to grow more quickly than they probably should.",max:5,costs:{power:function(e,t){return Math.pow(e,3.5)+15*t}},effect:{type:"multiply",food:function(e){return Math.pow(1.1,e)}},flavorTexts:{},requirements:{exploration:"S5"},source:"plants"},{phase:"preEvent",key:"EW1",type:"event",name:"Rainfall stops",description:"The rain has stopped, so I'm not getting any water that way. I hope it starts up again soon.",max:2,costs:{},effect:{type:"multiply",water:function(e){return e-1}},flavorTexts:{1:"The rain has stopped, so I'm not getting any water that way. I hope it starts up again soon."},requirements:{},source:"rainfall",negated:{upgrade:"TW1",message:"The rain has stopped. Luckily, not a problem for the condensate collector. Thanks, Future Barry!",postMessage:"Hey, I just got a condensate collector from Future Barry! No rainfall is no longer a problem."}},{phase:"preEvent",key:"EW2",type:"event",name:"Stream contaminated",description:"The stream's started to smell like paint. I'm not sure what happened, but I'm not going to trust it now.",max:50,costs:{},effect:{type:"multiply",water:function(e){return e-1}},flavorTexts:{1:"The stream's started to smell like paint. I'm not sure what happened, but I'm not going to trust it now."},requirements:{},source:"stream",negated:{upgrade:"TW2",message:"The stream's started to smell like paint, but that's not a problem for this filter. Nice thinking, Future Barry!",postMessage:"I just got a new filter from Future Barry which should be able to deal with the paint pollution."}},{phase:"preEvent",key:"EM1",type:"event",name:"Letsy downtime",description:"Letsy just had an outage, and it's been flaky ever since. My income there has dropped in half.",max:2,costs:{},effect:{type:"multiply",money:function(e){return 1===e?.5:1}},flavorTexts:{1:"Letsy just had an outage, and it's been flaky ever since. My income there has dropped in half.",2:"Letsy's going through an outage, but Future Barry taught me how to mirror their site. I don't know what's going on, but sales are better than ever!"},requirements:{},source:"letsy",negated:{upgrade:"TM1",message:"Letsy's going through an outage, but my site mirror's still going. I don't know what's going on, but thanks, Future Barry!",postMessage:"Future Barry taught me how to mirror Letsy's site. I don't know what's going on, but sales are better than ever!"}},{phase:"preEvent",key:"EF1",type:"event",name:"Jar shortage",description:"I'm having a tough time getting enough jars and lids. I can preserve maybe half as much food right now.",max:50,costs:{},effect:{type:"multiply",food:function(e){return 1===e?.5:1}},flavorTexts:{1:"I'm having a tough time getting enough jars and lids. I can preserve maybe half as much food right now."},requirements:{},source:"preserves",negated:{upgrade:"TF1",message:"There's a shortage on jars and lids, but Future Barry's food compression's working great!",postMessage:"Future Barry's food compressor's letting me stretch whatever jars and lids I can get."}},{phase:"expand",key:"BU1",type:"purchased",name:"Create more Barrys",description:"Throw Barrys into time holes to create more Barrys.",max:200,costs:{barry:function(e){return 1===e?0:5*e}},effect:{type:"add",barry:function(e){return 5*e}},flavorTexts:{},requirements:{},source:"copies"},{phase:"expand",key:"BU2",type:"purchased",name:"Fracture time",description:"Force time holes into other time holes to create more time holes. More time holes means more Barrys!",max:100,costs:{barry:function(e){return Math.pow(5,e)}},effect:{type:"multiply",barry:function(e){return Math.pow(e,3.5)}},flavorTexts:{},requirements:{upgrade:{key:"BU1",level:5}},source:"copies"},{phase:"expand",key:"BU3",type:"purchased",name:"Hire Barrys",description:"Hire Barrys to shove Barrys into time holes.",max:10,costs:{barry:function(e){return Math.pow(e,3.5)+100*e}},effect:{type:"time",barry:function(e){return Math.pow(.7,e)}},flavorTexts:{},requirements:{upgrade:{key:"BU1",level:10}},source:"copies"},{phase:"expand",key:"BU4",type:"purchased",name:"Merge Director Barry",description:"Merge Barrys into a Director Barry to deal with all these other Barrys.",max:1,costs:{barry:function(){return 1e6}},effect:{type:"add",barry:function(){return 0}},flavorTexts:{},requirements:{upgrade:{key:"BU2",level:6}},source:"copies"}],$=function(e){var t=J.find((function(t){return t.key===e}));if(!t)throw new Error("Could not find an upgrade with key: ".concat(e));return t},K=function(e){var t,r,n,a=e.phase,o=e.upgrade,i=e.resources,s=e.maxResources,l=e.distance,c=e.purchasedUpgrades,u=e.timedUpgrades,d=e.playerExplorations,p=e.level,h=null!==(n=null===(t=c[o.key])||void 0===t?void 0:t.level)&&void 0!==n?n:null===(r=u[o.key])||void 0===r?void 0:r.level;if(!Q({phase:a,upgrade:o,purchasedUpgrades:c,timedUpgrades:u,playerExplorations:d,resources:i,maxResources:s}))return!1;var m=null!==p&&void 0!==p?p:(null!==h&&void 0!==h?h:0)+1,f=!0,y=!1,g=void 0;try{for(var v,w=Object.keys(o.costs)[Symbol.iterator]();!(f=(v=w.next()).done);f=!0){var x=v.value,b=o.costs[x];if(b&&b(m,l)>i[x])return!1}}catch(k){y=!0,g=k}finally{try{f||null==w.return||w.return()}finally{if(y)throw g}}return m<=o.max},Q=function(e){var t,r,n,a,o=e.phase,i=e.upgrade,s=e.purchasedUpgrades,l=e.timedUpgrades,c=e.playerExplorations,u=e.maxResources;if("event"===i.type||i.phase!==o&&("postEvent"!==i.phase||"traveling"!==o))return!1;if(null===(t=s[i.key])||void 0===t?void 0:t.level)return!0;var d=!0,p=!1,h=void 0;try{for(var m,f=Object.entries(i.requirements)[Symbol.iterator]();!(d=(m=f.next()).done);d=!0){var y=V(m.value,2),g=y[0],v=y[1];if(("food"===g||"water"===g||"money"===g)&&u[g]<v)return!1}}catch(k){p=!0,h=k}finally{try{d||null==f.return||f.return()}finally{if(p)throw h}}if(i.requirements.exploration&&100!==(null===(r=c[i.requirements.exploration])||void 0===r?void 0:r.progress))return!1;var w,x,b=i.requirements.upgrade;return!b||((null!==(w=null===(n=s[b.key])||void 0===n?void 0:n.level)&&void 0!==w?w:0)>=b.level||(null!==(x=null===(a=l[b.key])||void 0===a?void 0:a.level)&&void 0!==x?x:0)>=b.level)},ee=function(e){var t=e.upgrade,r=e.currentLevel,n=e.distance,a=e.level,o=null!==a&&void 0!==a?a:(null!==r&&void 0!==r?r:0)+1;return Object.entries(t.costs).map((function(e){var t=V(e,2),r=t[0],a=t[1];return a?{key:r,cost:a(o,n)}:{key:r,cost:0}}))},te=function(e){return null!==e&&void 0!==e};function re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ne=function(e,t){return e.reduce((function(e,r){var n=r.upgrade.effect[t.resource];return n&&"time"===r.upgrade.effect.type?Math.floor(e*n(r.level)):e}),1e4)},ae=r(2699);function oe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var ie=new Date(1997,7,29,2,14,0).valueOf(),se=(0,U.Z)(ie,{days:30}).valueOf(),le=new Date(2978,1,23,1,14,0),ce=function(e){var t=e.className,r=d((function(e){return e.time})),a=d((function(e){return e.resources})),o=d((function(e){return e.maxResources})),i=d((function(e){return e.phase})),s=d((function(e){return e.skills})),l=d((function(e){return e.upgrades})),c=d((function(e){return e.timedUpgrades})),u=d((function(e){return e.unlocks})),p=function(e){var t=e.upgrades,r=e.time,n=e.timedUpgrades;return Object.entries(t).map((function(e){var t=re(e,2),r=t[0],n=t[1];return n?{key:r,level:n.level,upgrade:$(r)}:null})).concat(Object.entries(n).map((function(e){var a=re(e,2),o=a[0],i=a[1];if(!i||i.time>r)return null;var s=$(o);if(s.negated){var l,c,u=s.negated.upgrade;if((null===(l=t[u])||void 0===l?void 0:l.level)||(null===(c=n[u])||void 0===c?void 0:c.level))return null}return{key:o,level:i.level,upgrade:$(o)}}))).filter(te).sort((function(e,t){var r=e.upgrade.effect.type,n=t.upgrade.effect.type;return r===n?0:"add"===r&&"multiply"===n?-1:1}))}({upgrades:l,time:r,timedUpgrades:c}),h=d((function(e){return e.timers})),m=(0,ae.groupBy)(p,(function(e){return e.upgrade.source})),f="postEvent"===i||"traveling"===i?le:se,y=(0,A.Z)((0,O.Z)(f,1e3*r),"MMMM d, yyyy HH'h'"),g="expand"===i||"collapse"===i?["barry"]:["junk","money","food","water","power"];return(0,n.jsxs)("div",{className:t,children:[(0,n.jsxs)("div",{className:"mb-2",children:[(0,n.jsxs)("div",{className:"mb-2",children:["It is ",y,"."]}),(0,n.jsx)("h2",{className:"mb-1 font-bold",children:"Inventory"}),(0,n.jsx)("ul",{className:"space-y-2",children:g.map((function(e){if(0===o[e])return null;var t,r=G(e);return(0,n.jsxs)("li",{className:"p-2 border rounded-md",children:[(0,n.jsxs)("div",{className:"flex justify-between mb-1 font-semibold",children:[(0,n.jsx)("span",{children:r.name}),(0,n.jsx)("span",{children:r.format(a[e])})]}),("expand"===i||"collapse"===i)&&(0,n.jsx)(w,{progress:h.copies/ne(null!==(t=null===m||void 0===m?void 0:m.copies)&&void 0!==t?t:[],W("copies"))*100}),"preEvent"===i&&(0,n.jsx)("ul",{children:_.filter((function(t){return t.resource===e})).map((function(e){var t=(0,Z.Z)(24);if(!m[e.key])return null;var a=function(e,t){return e.reduce((function(e,r){var n=r.upgrade,a=n.effect[t.resource];return a&&"add"===n.effect.type?e+a(r.level):a&&"multiply"===n.effect.type?e*a(r.level):e}),0)}(m[e.key],e),o=ne(m[e.key],e),i=a*(t/o);return(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:e.name}),(0,n.jsxs)("span",{children:[r.format(Math.floor(i)),"/day"]})]}),(0,n.jsx)(w,{progress:0===a?0:h[e.key]/o*100})]},e.key)}))})]},e)}))})]}),!("postEvent"!==i&&"traveling"!==i)&&(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"font-bold",children:"Skills"}),(0,n.jsx)("ul",{children:Object.entries(s).map((function(e){var t=oe(e,2),r=t[0],a=t[1];return(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("span",{children:z(r).name}),(0,n.jsxs)("span",{children:[Math.floor(a.current)," ",u.loop&&"/ ".concat(Math.floor(a.permanent+a.thisLoop))]})]}),(0,n.jsx)(w,{progress:100*a.current%100}),u.loop&&(0,n.jsx)(w,{variant:"primary",progress:100*(a.permanent+a.thisLoop)%100})]},r)}))})]})]})},ue=r(8462);function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function pe(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var he=(0,m.Z)(24)/1e3,me=new Date(1997,7,29,2,14,0),fe=(0,U.Z)(me,{days:30}),ye=function(e){var t=e.selectedUpgradeKey,r=e.setSelectedUpgrade,o=h(),i=d((function(e){return e.timeline})),s=d((function(e){return e.unlocks})),l=d((function(e){return e.timedUpgrades})),c=d((function(e){return e.upgrades})),u=d((function(e){return e.explorations})),p=d((function(e){return e.phase})),m=d((function(e){return e.resources})),y=d((function(e){return e.maxResources})),g=d((function(e){return Math.floor(e.time/(0,Z.Z)(24))})),w=(0,a.useState)(void 0),x=w[0],b=w[1],k=t?$(t):void 0,j=Object.entries(l).filter((function(e){return te(e[1])})).filter((function(e){return!(!s.timelineEvents&&"event"===$(e[0]).type)})).map((function(e){var t,r,n=de(e,2),a=n[0],o=n[1],i=$(a);return{type:"purchased"===i.type?"permanent":"event",time:o.time,text:"".concat("purchased"===i.type?"Timed upgrade":"Event",": ").concat(i.name," (").concat(null!==(r=null===(t=l[i.key])||void 0===t?void 0:t.level)&&void 0!==r?r:1,")")}})),E=i.map((function(e){return{type:"upgrade",time:e.time,text:ve(e.action)}})),M=pe(j).concat(pe(E)),T=(0,ae.groupBy)(M,(function(e){return Math.floor(e.time/he)}));return(0,n.jsxs)("div",{className:"inline-block",children:[(0,n.jsxs)("div",{className:"relative flex items-center justify-between",children:[(0,n.jsx)("h2",{children:"Timeline"}),s.loop&&"traveling"===p&&(0,n.jsx)(v,{variant:"danger",onClick:function(){b(void 0),o({type:"LOOP"})},children:"Loop"})]}),(0,n.jsx)("ul",{className:"flex flex-nowrap",children:(0,ae.range)(0,30).map((function(e){var t,r,a,o,i=!!(null===(t=T[e])||void 0===t?void 0:t.find((function(e){return"upgrade"===e.type}))),s=!!(null===(r=T[e])||void 0===r?void 0:r.find((function(e){return"permanent"===e.type}))),d=!!(null===(a=T[e])||void 0===a?void 0:a.find((function(e){return"event"===e.type})));if(k){var h,v,w,j,E=null!==(w=null===(h=l[k.key])||void 0===h?void 0:h.level)&&void 0!==w?w:0,M=Math.floor((null!==(j=null===(v=l[k.key])||void 0===v?void 0:v.time)&&void 0!==j?j:0)/(0,Z.Z)(24));o=!K({phase:p,upgrade:k,resources:m,maxResources:y,distance:30-e,purchasedUpgrades:c,timedUpgrades:l,playerExplorations:u,level:null!==E&&void 0!==E?E:1})||e>=M}else o="traveling"===p&&void 0!==x&&x<=e||"preEvent"===p&&e<g;return(0,n.jsxs)("button",{className:(0,f.Z)("inline-grid relative border-2 border-gray-300 w-[32px] h-[32px] grid-cols-2 grid-rows-2 -ml-[2px]",o&&"border-opacity-20",e===x&&"shadow-[0_0_0_3px_red] z-10"),style:{gridTemplateAreas:'\n                "upgrade permanent"\n                "event ."\n              '},onClick:function(){b(x!==e?e:void 0)},children:[i&&(0,n.jsx)("div",{className:(0,f.Z)("[grid-area:upgrade] aspect-[1/1] bg-blue-700","traveling"===p&&void 0!==x&&x<=e&&"opacity-20")}),s&&(0,n.jsx)("div",{className:"[grid-area:permanent] aspect-[1/1] bg-green-500"}),d&&(0,n.jsx)("div",{className:"[grid-area:event] aspect-[1/1] bg-red-500"})]},e)}))}),void 0!==x&&(0,n.jsx)(ge,{selectedDay:x,setSelectedDay:b,timeline:T,selectedUpgrade:k,setSelectedUpgrade:r},x)]})},ge=function(e){var t,r,o,i,s,l=e.selectedDay,c=e.setSelectedDay,u=e.timeline,p=e.selectedUpgrade,m=e.setSelectedUpgrade,y=u[l],g=d((function(e){return e.phase})),w=d((function(e){return e.unlocks})),x=d((function(e){return e.timedUpgrades})),b=d((function(e){return e.resources})),k=h(),j=(0,a.useState)(!1),E=j[0],M=j[1];return(0,n.jsxs)("div",{className:"relative grid grid-cols-[1fr_50px] border p-2 border-t-0 rounded-b-md",style:{gridTemplateAreas:'\n      "restart close"\n      "events events"\n    '},children:[(0,n.jsx)(v,{className:"[grid-area:close]",onClick:function(){c(void 0)},children:"X"}),p&&(0,n.jsx)("div",{className:"[grid-area:restart]",children:(0,n.jsxs)(v,{active:!0,disabled:Math.floor((null!==(s=null===(t=x[p.key])||void 0===t?void 0:t.time)&&void 0!==s?s:0)/(0,Z.Z)(24))<=l,onClick:function(){var e;(null===(e=x[p.key])||void 0===e?void 0:e.level)?k({type:"MOVE_TIMED_UPGRADE",payload:{key:p.key,day:l}}):k({type:"BUY_TIMED_UPGRADE",payload:{key:p.key,day:l}}),m(void 0)},children:["Send Upgrade (",ee({upgrade:p,resources:b,currentLevel:null===(r=x[p.key])||void 0===r?void 0:r.level,level:(null===(o=x[p.key])||void 0===o?void 0:o.level)?null===(i=x[p.key])||void 0===i?void 0:i.level:void 0,distance:30-l}).map((function(e){return G(e.key).formatWithType(e.cost)})).join(","),")"]})}),void 0!==l&&"preEvent"!==g&&!p&&(0,n.jsxs)("div",{className:"[grid-area:restart] mb-1",children:[(0,n.jsx)(v,{className:"mr-2",variant:"danger",onClick:function(){E?(M(!1),c(void 0),k({type:"TRAVEL",payload:{day:l}})):M(!0)},children:E?"Confirm":"Restart Here"}),E&&(0,n.jsxs)(n.Fragment,{children:[w.loop&&"traveling"===g&&(0,n.jsx)("span",{className:"text-red-400",children:"WARNING: You should loop before resetting to save any permanent stat progress from this loop."}),(0,n.jsxs)("div",{children:[(0,n.jsx)("span",{children:"This will reset your exploration progress, resources (including power), and anything you've done on the selected day and after. You will keep all unlocks and Timed Upgrades."}),"postEvent"===g&&(0,n.jsx)("span",{className:"block mt-1",children:"You may want to explore more before restarting."})]})]})]}),void 0!==y&&(0,n.jsx)("ul",{className:(0,f.Z)("[grid-area:events]",p&&"opacity-30"),children:y.map((function(e,t){return(0,n.jsxs)("li",{className:"flex items-center",children:[(0,n.jsx)("div",{className:(0,f.Z)("w-[14px] h-[14px] inline-block mr-1","upgrade"===e.type?"bg-blue-700":"event"===e.type?"bg-red-500":"bg-green-500")}),(0,n.jsxs)("span",{className:(0,f.Z)("traveling"===g&&"upgrade"===e.type&&"text-gray-500"),children:[(0,A.Z)((0,ue.Z)(fe,{seconds:1e3*e.time}),"hh:mm bb")," ",e.text]})]},t)}))})]})},ve=function(e){switch(e.type){case"BUY_UPGRADE":return"Buy upgrade: ".concat($(e.payload.key).name);case"BUY_TIMED_UPGRADE":var t=$(e.payload.key);return"purchased"===t.type?"Timed upgrade: ".concat(t.name):"Event: ".concat(t.name);default:throw new Error("No text found for action: ".concat(e.type))}};function we(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function xe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var be=function(e){var t=e.className,r=e.selectedUpgrade,o=e.setSelectedUpgrade,i=d((function(e){return e.resources})),s=d((function(e){return e.unlocks})),l=d((function(e){return e.autoUpgrade})),c=d((function(e){return e.maxResources})),u=d((function(e){return e.phase})),p=d((function(e){return e.upgrades})),m=d((function(e){return e.timedUpgrades})),y=d((function(e){return e.explorations})),g=h(),w=(0,a.useState)({}),x=w[0],b=w[1],k=(0,a.useMemo)((function(){return _.map((function(e){var t=J.filter((function(t){return t.source===e.key&&!!Q({upgrade:t,phase:u,playerExplorations:y,purchasedUpgrades:p,timedUpgrades:m,resources:i,maxResources:c})}));return{source:e,available:t}}))}),[c,u,y,p,i,m]);return(0,n.jsx)("ul",{className:(0,f.Z)("flex flex-col gap-2",t),children:k.map((function(e){var a=G(e.source.resource);if(!e.available.length&&(!s.autoPurchase||"preEvent"!==u))return null;var d=s.autoPurchase&&"preEvent"===u||s.autoPurchaseExpand&&("expand"===u||"collapse"===u);return(0,n.jsxs)("li",{children:[(0,n.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[d&&(0,n.jsx)(v,{active:l[e.source.key],onClick:function(){g({type:"SET_AUTO_PURCHASE",payload:{key:e.source.key,enabled:!l[e.source.key]}})},children:"Auto"}),(0,n.jsxs)("h2",{children:[a.name,": ",e.source.name]})]}),(0,n.jsx)("ul",{className:(0,f.Z)("flex flex-col gap-2",t),children:e.available.map((function(e){var t,a,s,l,h,w,k,j,E,M,T=null!==(w=null!==(h=null===(t=p[e.key])||void 0===t?void 0:t.level)&&void 0!==h?h:null===(a=m[e.key])||void 0===a?void 0:a.level)&&void 0!==w?w:0,I="postEvent"===e.phase?null!==(j=Math.floor(30-(null!==(k=null===(s=m[e.key])||void 0===s?void 0:s.time)&&void 0!==k?k:0)/(0,Z.Z)(24)))&&void 0!==j?j:1:0,N=e.flavorTexts[T],S=Object.entries(e.costs).map((function(e){var t=xe(e,2),r=t[0],n=t[1];return n?G(r).formatWithType(n(T+1,I)):null})).filter(Boolean).join(", "),P=30-Math.floor((null!==(E=null===(l=m[e.key])||void 0===l?void 0:l.time)&&void 0!==E?E:0)/(0,Z.Z)(24));return(0,n.jsxs)("li",{className:"flex flex-col p-2 border rounded-sm gap-x-2",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[("preEvent"===e.phase||"expand"===e.phase)&&(0,n.jsxs)(v,{className:(0,f.Z)(r===e.key&&"z-20"),disabled:!K({upgrade:e,phase:u,playerExplorations:y,purchasedUpgrades:p,timedUpgrades:m,distance:0,resources:i,maxResources:c}),"aria-label":"Buy ".concat(e.name),active:r===e.key,onClick:function(){g({type:"BUY_UPGRADE",payload:{key:e.key}})},children:["Buy"," ",T>0?"(".concat(T===e.max?"MAX":T,")"):""]}),"postEvent"===e.phase&&0===T&&(0,n.jsx)(v,{className:(0,f.Z)(r===e.key&&"z-20"),disabled:!K({upgrade:e,phase:u,playerExplorations:y,purchasedUpgrades:p,timedUpgrades:m,distance:0,resources:i,maxResources:c}),active:r===e.key,onClick:function(){o((function(t){return t===e.key?void 0:e.key}))},children:"Buy"}),"postEvent"===e.phase&&T>0&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(v,{className:(0,f.Z)(r===e.key&&"z-20"),disabled:!K({upgrade:e,phase:u,playerExplorations:y,purchasedUpgrades:p,timedUpgrades:m,distance:P+1,resources:i,maxResources:c,level:T})||30===I,active:r===e.key,onClick:function(){o((function(t){return t===e.key?void 0:e.key}))},children:"Move Upgrade"}),(0,n.jsx)(v,{disabled:!K({upgrade:e,phase:u,playerExplorations:y,purchasedUpgrades:p,timedUpgrades:m,distance:P,resources:i,maxResources:c}),onClick:function(){g({type:"UPGRADE_TIMED_UPGRADE",payload:{key:e.key}})},children:"Buy Level"})]}),(0,n.jsxs)("div",{children:[e.name," ",T!==e.max&&"(".concat(S,")")]})]}),T!==e.max&&(0,n.jsxs)(n.Fragment,{children:[d&&(0,n.jsxs)("label",{children:["Max Auto Level"," ",(0,n.jsx)("input",{className:"mt-1 text-gray-900",size:5,value:null!==(M=x[e.key])&&void 0!==M?M:"",onChange:function(t){b(function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){we(e,t,r[t])}))}return e}({},x,we({},e.key,t.target.value)))},onBlur:function(){g({type:"SET_AUTO_MAX_LEVEL",payload:{key:e.key,maxLevel:x[e.key]||void 0}})}})]})," ",(0,n.jsx)("p",{children:ke(e,T)}),(0,n.jsx)("p",{children:e.description})]}),N&&(0,n.jsx)("p",{className:"col-start-2",children:N})]},e.key)}))})]},e.source.key)}))})},ke=function(e,t){if(t+1>e.max)return"";var r=xe(Object.entries(e.effect).find((function(e){var t=xe(e,2),r=t[0],n=t[1];return"type"!==r&&!!n})),2),n=r[0],a=r[1],o=G(n),i=0===t?a(t+1):a(t+1)-a(t);return"add"===e.effect.type?"+".concat(Math.floor(i)," ").concat(o.name," gain"):"multiply"===e.effect.type?"+".concat(i.toFixed(2),"x ").concat(o.name," gain"):"+".concat(Math.abs(i).toFixed(2),"x ").concat(o.name," speed")},je=r(7189),Ee=r.n(je);function Me(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Te=function(e){var t=e.className;return(0,n.jsxs)("div",{className:(0,f.Z)("w-[80px] relative overflow-hidden rounded-md",t),children:[(0,n.jsx)(Ne,{className:"absolute top-0 left-0 w-full h-full"}),(0,n.jsx)(Ie,{className:"absolute top-0 left-0 w-full h-full"})]})},Ie=function(e){var t=e.className,r=-(120*((d((function(e){return e.time}))%(0,Z.Z)(24)/(0,Z.Z)(1)-6)/6)-60);return(0,n.jsx)("div",{className:(0,f.Z)("flex items-center justify-center",t),style:{transform:"translate(25%, ".concat(r,"%)")},children:(0,n.jsx)("div",{className:"w-8 h-8 bg-yellow-300 rounded-full filter blur-md"})})},Ne=function(e){var t=e.children,r=e.className,a=d((function(e){return e.time})),o=Me(Se(a),2),i=o[0],s=o[1];return(0,n.jsx)("div",{className:(0,f.Z)("flex items-center justify-center",r),style:{background:"linear-gradient(".concat(s,", ").concat(i,")")},children:t})},Se=function(e){var t,r=e%(0,Z.Z)(24)/(0,Z.Z)(1),n=Pe.findIndex((function(e){return e.time>r})),a=Math.max(n-1,0),o=Math.min(a+1,Pe.length-1),i=Pe[a],s=Pe[o];if(s.time===i.time)t=0;else{var l=s.time-i.time;t=(r-i.time)/l}return[Ee()(i.low,s.low,t),Ee()(i.high,s.high,t)]},Pe=[{time:0,low:"#111827",high:"#111827"},{time:5,low:"#111827",high:"#111827"},{time:6,low:"#E67B09",high:"#112044"},{time:7,low:"#E79617",high:"#536875"},{time:8,low:"#FADA77",high:"#343E56"},{time:9,low:"#E2D7A9",high:"#343E61"},{time:10,low:"#ABC3BF",high:"#314C87"},{time:12,low:"#8DBACD",high:"#3A6DAE"},{time:18,low:"#6FACC7",high:"#085997"},{time:19,low:"#B59A6D",high:"#6C778A"},{time:20,low:"#42677B",high:"#3372A1"},{time:21,low:"#13203C",high:"#111827"},{time:22,low:"#111827",high:"#111827"},{time:24,low:"#111827",high:"#111827"}],qe=function(){return(0,n.jsx)("div",{className:"absolute z-50 flex items-center justify-center min-w-full min-h-screen text-6xl bg-gray-900 text-gray-50"})},Be=function(){var e=(0,a.useState)(0),t=e[0],r=e[1];return(0,a.useEffect)((function(){setTimeout((function(){r((function(e){return e+1}))}),2e3)})),(0,n.jsx)("div",{className:"flex items-center justify-center w-full h-screen bg-black text-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[(0,n.jsx)("h2",{className:(0,f.Z)("mb-1 text-5xl transition-opacity duration-[3s] opacity-0",t>0&&"opacity-100"),children:"Barry's Time Adventures"}),(0,n.jsx)("p",{className:(0,f.Z)("mb-2 text-2xl opacity-0 transition-opacity duration-[3s]",t>1&&"opacity-100"),children:"[A]ll out of barrys"}),(0,n.jsxs)("p",{className:(0,f.Z)("mb-5 opacity-0 text-1xl transition-opacity duration-[1s]",t>2&&"opacity-100"),children:["Created by:"," ",(0,n.jsx)("a",{target:"_blank",className:"underline",href:"https://www.github.com/threehams/",rel:"noreferrer",children:"ThreeHams"})]}),(0,n.jsxs)("p",{className:(0,f.Z)("mb-5 opacity-0 text-1xl transition-opacity duration-[1s]",t>3&&"opacity-100"),children:["Additional writing:"," ",(0,n.jsx)("a",{target:"_blank",className:"underline",href:"https://twitter.com/zbeeblebroxIV",rel:"noreferrer",children:"Eugene"})]}),(0,n.jsx)(C,{className:(0,f.Z)("opacity-0",t>4&&"opacity-100")})]})})};function Fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ce=function(){var e=d((function(e){return e.unlocks})),t=d((function(e){return e.phase})),r=h(),a=Object.entries(e).filter((function(e){var t=Fe(e,2),r=t[0];return t[1]&&!!Ue[r]})).map((function(e){var t=Fe(e,1)[0];return Ue[t]}));return a.length&&"preEvent"===t?(0,n.jsx)("ul",{children:(0,n.jsxs)("li",{children:[(0,n.jsx)(v,{onClick:function(){r({type:"SET_MULTIPLIER",payload:{multiplier:1}})},children:"1X"}),a.map((function(e){return(0,n.jsxs)(v,{onClick:function(){r({type:"SET_MULTIPLIER",payload:{multiplier:e*X}})},children:["X",e]},e)}))]})}):null},Ue={pastSpeed5x:5,pastSpeed10x:10};function Ae(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,a=!1,o=void 0;try{for(var i,s=e[Symbol.iterator]();!(n=(i=s.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(l){a=!0,o=l}finally{try{n||null==s.return||s.return()}finally{if(a)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Oe=function(){var e=d((function(e){return e.exploration})),t=d((function(e){return e.phase})),r=d((function(e){return e.explorations})),a=h(),o=Y.filter((function(e){var t,n,a;return 100!==(null===(t=r[e.key])||void 0===t?void 0:t.progress)&&((!e.removed||100!==(null===(n=r[e.removed])||void 0===n?void 0:n.progress))&&(!e.requirements.action||100===(null===(a=r[e.requirements.action])||void 0===a?void 0:a.progress)))}));return(0,n.jsx)("div",{children:(0,n.jsx)("ul",{children:o.map((function(o){var i,s,l=null!==(s=null===(i=r[o.key])||void 0===i?void 0:i.progress)&&void 0!==s?s:0;return(0,n.jsxs)("li",{className:"flex flex-col gap-2 p-2 mb-2 border rounded-md",children:[(0,n.jsxs)("div",{className:"flex flex-row gap-2",children:[(0,n.jsx)(v,{disabled:"traveling"===t,onClick:function(){a({type:"EXPLORE",payload:{location:o.key}})},children:o.key===e?"Stop":"Go"}),o.name]}),(0,n.jsx)("p",{children:o.description}),o.generates&&(0,n.jsx)("div",{className:"text-red-400",children:"Note: This will drain your resources continuously in exchange for power. You can start or stop this at any time."}),(0,n.jsxs)("div",{children:[(0,n.jsx)("p",{children:Ze(o.train)}),Re(o.drain)&&(0,n.jsx)("p",{children:Re(o.drain)})]}),(0,n.jsx)(w,{progress:l})]},o.key)}))})})},Ze=function(e){var t=Object.entries(e).map((function(e){var t=Ae(e,2),r=t[0];return t[1]?z(r).name:null})).filter(te).join(", ");return"Skills: ".concat(t)},Re=function(e){var t=Object.entries(e).map((function(e){var t=Ae(e,2),r=t[0],n=t[1];if(!n)return null;var a=G(r);return"".concat(a.name," ").concat(n,"x")})).filter(te).join(", ");return t?"Drains: ".concat(t):""},Le=function(e){var t=e.panel,r=e.setPanel,a=e.selectedUpgrade,o=e.setSelectedUpgrade;return(0,n.jsxs)("div",{children:[(0,n.jsxs)(j,{className:"mb-2",children:[(0,n.jsx)(E,{active:"explorations"===t,onClick:function(){r("explorations")},children:"Exploration"}),(0,n.jsx)(E,{active:"upgrades"===t,onClick:function(){r("upgrades")},children:"Send Upgrades"})]}),"upgrades"===t&&(0,n.jsx)(be,{selectedUpgrade:a,setSelectedUpgrade:o}),"explorations"===t&&(0,n.jsx)(Oe,{})]})},_e=function(){var e=d((function(e){return e.timers.convergence}));return(0,n.jsx)("div",{className:"flex items-center justify-center w-full h-screen bg-[#330000] text-gray-50",children:(0,n.jsxs)("div",{className:"text-4xl w-[90%] space-y-4",children:[(0,n.jsx)("div",{className:(0,f.Z)("text-left opacity-0",e>3e3&&"opacity-100"),children:"he has communicated to me"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-left",e>5e3&&"opacity-100"),children:"he has communicated to me in a dream"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-right",e>6e3&&"opacity-100"),children:"we are all dreaming"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-right",e>7e3&&"opacity-100"),children:"we are all awake"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-right",e>8e3&&"opacity-100"),children:"we are all chosen"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-center",e>1e4&&"opacity-100"),children:"we must rebuild"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-center",e>11500&&"opacity-100"),children:"WE MUST REBUILD"}),(0,n.jsx)("div",{className:(0,f.Z)("opacity-0 text-center",e>13e3&&"opacity-100"),children:"WE MUST REPOPULATE"})]})})},We=function(){var e=d((function(e){return e.time})),t=d((function(e){return e.phase})),r=(0,a.useState)("explorations"),o=r[0],i=r[1],s=(0,a.useState)(),l=s[0],c=s[1],u=d((function(e){return e.unlocks})),p=(0,a.useMemo)((function(){return"done"===t?(0,n.jsx)(Be,{}):"convergence"===t?(0,n.jsx)(_e,{}):(0,n.jsxs)("div",{className:(0,f.Z)("relative min-h-screen",De(t)),children:["event"===t&&(0,n.jsx)(qe,{}),l&&(0,n.jsx)("div",{className:"fixed z-10 w-screen h-screen bg-gray-900 opacity-70"}),(0,n.jsxs)("div",{className:(0,f.Z)("px-4 grid mx-auto min-w-[1080px] max-w-[1680px] gap-3 items-start","grid-rows-[auto_1fr]","grid-cols-[400px_1fr_240px_auto]","lg:grid-cols-[400px_1fr_240px_auto]"),style:{gridTemplateAreas:'\n            "timeline timeline timeline window"\n            "messages main status window"\n          '},children:[(0,n.jsxs)("aside",{className:"[grid-area:status] sticky top-[0px] py-2",children:[!1,(0,n.jsx)(Ce,{}),(0,n.jsx)(ce,{className:"mb-3"}),(0,n.jsx)(C,{})]}),(0,n.jsxs)("main",{className:"[grid-area:main] py-2",children:[("preEvent"===t||"expand"===t||"collapse"===t)&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{className:"mb-2",children:"Upgrades"}),(0,n.jsx)(be,{selectedUpgrade:l,setSelectedUpgrade:c})]}),("postEvent"===t||"traveling"===t)&&(0,n.jsx)(Le,{panel:o,setPanel:i,selectedUpgrade:l,setSelectedUpgrade:c},t)]}),(0,n.jsx)(Te,{className:"[grid-area:window] my-2 h-[calc(100vh-40px)] self-stretch sticky top-[0px]"}),(0,n.jsx)("div",{className:"[grid-area:messages] sticky top-[0px] py-2",children:(0,n.jsx)(P,{})}),u.pastRestart&&(0,n.jsx)("div",{className:(0,f.Z)("[grid-area:timeline]",l&&"relative z-20"),children:(0,n.jsx)(ye,{selectedUpgradeKey:l,setSelectedUpgrade:c})})]})]})}),[o,t,l,u.pastRestart]);return(0,n.jsx)("div",{className:e%(0,m.Z)(24)>(0,m.Z)(8)?"light":"dark",children:p})},De=function(e){return"preEvent"===e?"bg-gray-900 text-gray-100":"bg-stone-900 text-stone-100"},Ge=r(3139),He=r(5340),ze=(0,n.jsx)(We,{}),Xe=function(){var e=function(){var e=(0,a.useState)(void 0),t=e[0],r=e[1];i.onmessage=function(e){var n=e.data;"INITIAL"!==n.type?r((0,o.QE)(t,n.payload)):r(n.payload)};var n=(0,a.useCallback)((function(e){null===i||void 0===i||i.postMessage(e)}),[]);return(0,a.useMemo)((function(){return{dispatch:n,state:t}}),[n,t])}(),t=e.state,r=e.dispatch,s=(0,Ge.useRouter)();return t?(0,n.jsxs)(u,{value:t,children:[(0,n.jsx)(p,{value:r,children:(0,n.jsx)(He.ErrorBoundary,{FallbackComponent:Ye,children:ze})}),void 0!==s.query.debug&&(0,n.jsx)("pre",{children:JSON.stringify(t,null,2)})]}):(0,n.jsx)("div",{className:"flex items-center justify-center min-w-full min-h-screen",children:"Loading..."})},Ye=function(){return(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen gap-1 text-center",children:["Game crashed, likely an out-of-date save game. Save game migration is not yet in place. Reset your game for now, then reload the page.",(0,n.jsx)(C,{})]})},Ve=function(){var e=(0,a.useState)(!1),t=e[0],r=e[1];return(0,a.useEffect)((function(){r(!0)}),[]),t?(0,n.jsx)(Xe,{}):(0,n.jsx)("div",{className:"flex items-center justify-center min-w-full min-h-screen",children:"Loading..."})},Je=Ve}},function(e){e.O(0,[201,457,79,774,888,179],(function(){return t=3104,e(e.s=t);var t}));var t=e.O();_N_E=t}]);